(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Layout"],{"08cd":function(e,t,a){"use strict";a.r(t);var s,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inner-wrap"},[a("user-header",{directives:[{name:"show",rawName:"v-show",value:e.isShowUser,expression:"isShowUser"}],attrs:{userInfoData:e.authorizeUserInfo}}),a("router-view",{on:{getUserData:e.getUserInfo}}),a("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:e.load_user_msg,callback:function(t){e.load_user_msg=t},expression:"load_user_msg"}},[a("van-loading",{attrs:{type:"spinner",size:"30",color:"#fff"}})],1)],1)},i=[],o=(a("28a5"),a("6b54"),a("c93e")),n=a("a322"),c=(a("ac1e"),a("543e")),u=(a("8a58"),a("e41f")),l=(a("9a83"),a("f564")),h=(a("7f7f"),a("e17f"),a("2241")),f=(a("cadf"),a("551c"),a("097d"),a("2f62")),d=a("c5dc"),m=a("db04"),p=a("35df"),b={name:"App",data:function(){return{client_type:Object(p["c"])(),state:"",appContext:!1,load_user_msg:!1,load_user_info:"加载用户信息,请等候"}},components:(s={userHeader:d["a"]},Object(n["a"])(s,h["a"].name,h["a"]),Object(n["a"])(s,l["a"].name,l["a"]),Object(n["a"])(s,u["a"].name,u["a"]),Object(n["a"])(s,c["a"].name,c["a"]),s),computed:Object(o["a"])({},Object(f["b"])({isShowUser:function(e){return e.userInfo.showUser},authorizeUserInfo:function(e){return e.userInfo.userInfoInner}})),created:function(){if(Object(p["m"])("timeSpan",0),Object(p["i"])("iccid")){var e=Object(p["i"])("iccid");1===Object(p["d"])(e).state&&(Object(p["m"])("watch_card",e),Object(p["m"])("watchAutoSearch",1))}else Object(p["l"])("watch_card"),Object(p["l"])("watchAutoSearch");var t=this;if("app"===this.client_type){var a=navigator.userAgent.toLowerCase();if(/(ylkids_android)/.test(a))this.showHtmlcallJava2();else if(/(ios1.1.0)/.test(a)){window.webkit.messageHandlers.getIosToken.postMessage(null);setTimeout(function(){t.authorized()},500)}}else this.authorized()},methods:{showHtmlcallJava2:function(){var e=window.jsInterface.GetToken();localStorage.setItem("token",e),this.authorized()},plusReady:function(){localStorage.setItem("token",plus.storage.getItem("appToken")),this.authorized()},authorized:function(){if("wechat"===this.client_type||"alipay"===this.client_type||"app"===this.client_type){if("app"!==this.client_type){if(Object(p["h"])("userInfo","obj")){this.$store.commit("userInfo/changeUserStatus",!0);var e=document.querySelector(".user-wrap");e&&Object(p["m"])("userHeight",e.offsetHeight),"mifi"===this.global_variables.packed_project&&this.$store.commit("userInfo/changeUserStatus",!1)}("wechat"===this.client_type&&Object(p["h"])("wechat_version")!==this.global_variables.version||"alipay"===this.client_type&&Object(p["h"])("alipay_version")!==this.global_variables.version)&&(Object(p["l"])("token"),Object(p["l"])("state"))}if(Object(p["h"])("token"))"mifi"!==this.global_variables.packed_project&&this.getUserInfo();else{var t=this;h["a"].alert({title:"授权",message:"为了您的账号安全，我们需要您对本站进行授权操作并绑定账号。"}).then(function(){t.authorizedRediect()})}}else this.$store.commit("userInfo/changeUserStatus",!1)},GetUrlRelativePath:function(){var e=document.location.toString(),t=e.split("//"),a=t[1].indexOf("/"),s=t[1].substring(a);return-1!==s.indexOf("?")&&(s=s.split("?")[0]),s},getUserInfo:function(){var e=this;this.load_user_msg=!0,Object(m["a"])("/accountCenter/v2/user/info?"+Object(p["e"])({},"get")).then(function(t){if(e.load_user_msg=!1,0===t.error)if(t.data&&"{}"!==JSON.stringify(t.data)){var a={account:t.data.account,avatar:t.data.avatar,nickname:t.data.nickname};if(Object(p["m"])("userInfo",a,"obj"),"wechat"===e.client_type||"alipay"===e.client_type){e.$store.commit("userInfo/changeUserStatus",!0),e.$store.commit("userInfo/changeUserInfo",a);var s=document.querySelector(".user-wrap");s&&Object(p["m"])("userHeight",s.offsetHeight),"mifi"===e.global_variables.packed_project&&e.$store.commit("userInfo/changeUserStatus",!1)}else"app"===e.client_type&&e.$store.commit("userInfo/changeUserInfo",a)}else{var r=e;h["a"].alert({title:"账号异常",message:"您的账户信息存在问题,无法进行操作,请联系我司客服工作人员,我们将尽快为您解决问题。",showConfirmButton:!1}).then(function(){r.load_user_msg=!0,r.load_user_info="账号异常"})}else if(11002===t.error)e.$emit("getToken");else if(10007===t.error){var i=Date.parse(new Date)/1e3,o=t.extra-i;Object(p["m"])("timeSpan",o),e.getUserInfo()}else 20014===t.error?Object(l["a"])({message:"请求超时"}):t.status||t.error?e.showAuthorityError("A"+t.error):e.showAuthorityError("A-R"+JSON.stringify(t))})},showDoc:function(){h["a"].alert({message:"钻石：翼联会员体系下通用虚拟货币,可以用于:购买套餐,充值话费,游戏娱乐,购买优惠商品;\nELB：可通过阅读微信文章、充值话费和活动套餐等方式免费领取，用于商品现金抵扣、游戏娱乐等"})},authorizedRediect:function(){var e=this;this.state=Math.random().toString(36).substr(2)+(new Date).getTime(),Object(p["m"])("state",this.state);var t=this.GetUrlRelativePath();if(Object(p["m"])("authorized_redirect_uri",t),Object(p["i"])("iccid")){var a=Object(p["i"])("iccid");1===Object(p["d"])(a).state&&(Object(p["m"])("watch_card",a),Object(p["m"])("watchAutoSearch",1))}else Object(p["l"])("watch_card"),Object(p["l"])("watchAutoSearch");Object(m["a"])("/accountCenter/v2/oauth/authorize?"+Object(p["e"])({client_type:this.client_type,redirect_uri:this.global_variables.authorized_redirect_url+"/authority",scope:"userinfo",state:this.state},"get")).then(function(t){0===t.error?("wechat"===e.client_type?Object(p["m"])("wechat_version",e.global_variables.version):"alipay"===e.client_type&&Object(p["m"])("alipay_version",e.global_variables.version),location.href=t.data):11002===t.error?e.$emit("getToken"):e.this.showAuthorityError("C"+t.error)})},showAuthorityError:function(e){var t=this,a=e||"";h["a"].alert({title:"账号异常",showConfirmButton:!1,message:"您的账户信息存在问题,无法进行操作,请联系我司客服工作人员,我们将尽快为您解决问题"+a+"。"}).then(function(){t.load_user_msg=!0,t.load_user_info="账号异常"+a})}}},_=b,v=(a("0a9a"),a("2877")),g=Object(v["a"])(_,r,i,!1,null,null,null);g.options.__file="layout.vue";t["default"]=g.exports},"0a9a":function(e,t,a){"use strict";var s=a("39aa3"),r=a.n(s);r.a},"0b6e":function(e,t,a){"use strict";var s=a("e27a"),r=a.n(s);r.a},"39aa3":function(e,t,a){},c5dc:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-wrap"},[a("div",{staticClass:"user-inner-wrap"},[a("div",{staticClass:"user-name-wrap"},[a("img",{attrs:{src:e.getUserInfo.avatar}}),a("span",{staticClass:"user-name"},[e._v(e._s(e.getUserInfo.nickname))])]),a("div",[a("span",[e._v("钻石:")]),a("span",{staticClass:"icon-diamond-wrap",on:{click:function(t){e.showDoc(0)}}},[a("i",{staticClass:"icon-user-size  icon-diamond"}),e._v("\n                      "+e._s(e.getUserInfo.account.rmb)+"\n                  ")]),a("span",[e._v("ELB:")]),a("span",{staticClass:"icon-elb-wrap",on:{click:function(t){e.showDoc(1)}}},[a("i",{staticClass:"icon-user-size icon-elb"}),e._v("\n                      "+e._s(e.getUserInfo.account.elb)+"\n                  ")])])])])},r=[],i=a("a322"),o=(a("7f7f"),a("e17f"),a("2241")),n=a("c93e"),c=a("2f62"),u={name:"uesrHead",props:{userInfoData:{type:Object}},computed:Object(n["a"])({},Object(c["b"])({getUserInfo:function(e){return e.userInfo.userInfoInner}})),components:Object(i["a"])({},o["a"].name,o["a"]),methods:{showDoc:function(e){var t;t=0==e?"钻石：翼联会员体系下通用虚拟货币,可以用于:购买套餐,充值话费,游戏娱乐,购买优惠商品;":"ELB：可通过阅读微信文章、充值话费和活动套餐等方式免费领取，用于商品现金抵扣、游戏娱乐等;",o["a"].alert({message:t})}}},l=u,h=(a("0b6e"),a("2877")),f=Object(h["a"])(l,s,r,!1,null,null,null);f.options.__file="uesrHead.vue";t["a"]=f.exports},e27a:function(e,t,a){}}]);
//# sourceMappingURL=Layout.32634880.js.map