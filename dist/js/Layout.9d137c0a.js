(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Layout"],{"08cd":function(e,t,n){"use strict";n.r(t);var a,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("user-header",{directives:[{name:"show",rawName:"v-show",value:e.isShowUser,expression:"isShowUser"}],attrs:{userInfoData:e.authorizeUserInfo}}),n("router-view")],1)},s=[],i=(n("28a5"),n("6b54"),n("c93e")),c=n("a322"),r=(n("9a83"),n("f564")),l=(n("7f7f"),n("68ef"),n("4d75"),n("2fcb"),n("1988")),u=n("2b0e"),d=n("fe7e"),f=Object(d["a"])({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.tag,{tag:"component",class:e.b([e.type,e.size,{block:e.block,plain:e.plain,round:e.round,square:e.square,loading:e.loading,disabled:e.disabled,unclickable:e.disabled||e.loading,"bottom-action":e.bottomAction}]),attrs:{type:e.nativeType,disabled:e.disabled},on:{click:e.onClick}},[e.loading?n("loading",{attrs:{size:"20px",color:"default"===e.type?void 0:""}}):n("span",{class:e.b("text")},[e._t("default",[e._v(e._s(e.text))])],2)],1)},name:"button",props:{text:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,disabled:Boolean,nativeType:String,bottomAction:Boolean,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"}},methods:{onClick:function(e){this.loading||this.disabled||this.$emit("click",e)}}}),b=n("6605"),h=Object(d["a"])({render:function(){var e,t=this,n=t.$createElement,a=t._self._c||n;return a("transition",{attrs:{name:"van-dialog-bounce"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],class:[t.b(),t.className]},[t.title?a("div",{class:t.b("header",{isolated:!t.message&&!t.$slots.default}),domProps:{textContent:t._s(t.title)}}):t._e(),t.message||t.$slots.default?a("div",{class:t.b("content")},[t._t("default",[t.message?a("div",{class:t.b("message",(e={"has-title":t.title},e[t.messageAlign]=t.messageAlign,e)),domProps:{innerHTML:t._s(t.message)}}):t._e()])],2):t._e(),a("div",{staticClass:"van-hairline--top",class:t.b("footer",{buttons:t.showCancelButton&&t.showConfirmButton})},[a("van-button",{directives:[{name:"show",rawName:"v-show",value:t.showCancelButton,expression:"showCancelButton"}],class:t.b("cancel"),attrs:{loading:t.loading.cancel,size:"large"},on:{click:function(e){t.handleAction("cancel")}}},[t._v("\n        "+t._s(t.cancelButtonText||t.$t("cancel"))+"\n      ")]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:t.showConfirmButton,expression:"showConfirmButton"}],class:[t.b("confirm"),{"van-hairline--left":t.showCancelButton&&t.showConfirmButton}],attrs:{size:"large",loading:t.loading.confirm},on:{click:function(e){t.handleAction("confirm")}}},[t._v("\n        "+t._s(t.confirmButtonText||t.$t("confirm"))+"\n      ")])],1)])])},name:"dialog",components:{VanButton:f},mixins:[b["a"]],props:{title:String,message:String,callback:Function,className:[String,Object,Array],beforeClose:Function,messageAlign:String,confirmButtonText:String,cancelButtonText:String,showCancelButton:Boolean,showConfirmButton:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{handleAction:function(e){var t=this;this.beforeClose?(this.loading[e]=!0,this.beforeClose(e,function(n){!1!==n&&t.onClose(e),t.loading[e]=!1})):this.onClose(e)},onClose:function(e){this.$emit("input",!1),this.$emit(e),this.callback&&this.callback(e)}}}),p=n("a142"),m=function(){a=new(u["a"].extend(h))({el:document.createElement("div")}),a.$on("input",function(e){a.value=e}),document.body.appendChild(a.$el)},v=function e(t){return p["e"]?Promise.resolve():new Promise(function(n,o){a||m(),Object(l["a"])(a,e.currentOptions,t,{resolve:n,reject:o})})};v.defaultOptions={value:!0,title:"",message:"",overlay:!0,className:"",lockScroll:!0,beforeClose:null,messageAlign:"",confirmButtonText:"",cancelButtonText:"",showConfirmButton:!0,showCancelButton:!1,closeOnClickOverlay:!1,callback:function(e){a["confirm"===e?"resolve":"reject"](e)}},v.alert=v,v.confirm=function(e){return v(Object(l["a"])({showCancelButton:!0},e))},v.close=function(){a&&(a.value=!1)},v.setDefaultOptions=function(e){Object(l["a"])(v.currentOptions,e)},v.resetDefaultOptions=function(){v.currentOptions=Object(l["a"])({},v.defaultOptions)},v.install=function(){u["a"].use(h)},u["a"].prototype.$dialog=v,v.resetDefaultOptions();var g=v,O=n("2f62"),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-wrap"},[n("div",{staticClass:"user-inner-wrap"},[n("div",{staticClass:"user-name-wrap"},[n("img",{attrs:{src:e.getUserInfo.avatar}}),n("span",{staticClass:"user-name"},[e._v(e._s(e.getUserInfo.nickname))])]),n("div",[n("span",[e._v("余额:")]),n("span",{staticClass:"icon-diamond-wrap"},[n("i",{staticClass:"icon-user-size  icon-diamond"}),e._v("\n                      "+e._s(e.getUserInfo.account.rmb)+"\n                  ")]),n("span",{staticClass:"icon-elb-wrap"},[n("i",{staticClass:"icon-user-size icon-elb"}),e._v("\n                      "+e._s(e.getUserInfo.account.elb)+"\n                  ")]),n("span",{staticClass:"icon-question",on:{click:e.showDoc}},[e._v("?")])])])])},w=[],_={name:"uesrHead",props:{userInfoData:{type:Object}},computed:Object(i["a"])({},Object(O["b"])({getUserInfo:function(e){return e.userInfo.userInfoInner}})),components:Object(c["a"])({},g.name,g),methods:{showDoc:function(){g.alert({message:"钻石：翼联会员体系下通用虚拟货币,可以用于:购买套餐,充值话费,游戏娱乐,购买优惠商品;\nELB：可通过阅读微信文章、充值话费和活动套餐等方式免费领取，用于商品现金抵扣、游戏娱乐等"})}}},y=_,C=(n("0b6e"),n("2877")),k=Object(C["a"])(y,j,w,!1,null,null,null);k.options.__file="uesrHead.vue";var B,x=k.exports,I=n("db04"),S=n("35df"),$={name:"App",data:function(){return{client_type:"",state:"",appContext:!1}},components:(B={userHeader:x},Object(c["a"])(B,g.name,g),Object(c["a"])(B,r["a"].name,r["a"]),B),computed:Object(i["a"])({},Object(O["b"])({isShowUser:function(e){return e.userInfo.showUser},authorizeUserInfo:function(e){return e.userInfo.userInfoInner}})),created:function(){if(Object(S["f"])("iccid")){var e=Object(S["f"])("iccid");1==Object(S["b"])(e).state&&(Object(S["i"])("watch_card",e),Object(S["i"])("watchAutoSearch",1))}else Object(S["h"])("watch_card"),Object(S["h"])("watchAutoSearch");document.addEventListener("plusready",this.plusReady,!1)},mounted:function(){var e=this;if(this.client_type=Object(S["a"])(),"wechat"==this.client_type||"alipay"==this.client_type||"app"==this.client_type)if("app"!=this.client_type&&Object(S["e"])("userInfo","obj")&&this.$store.commit("userInfo/changeUserStatus",!0),Object(S["e"])("token"))this.getUserInfo();else if(Object(S["f"])("data")&&Object(S["i"])("auth_data",Object(S["f"])("data")),Object(S["e"])("auth_data"))Object(S["e"])("state")==Object(S["f"])("state")?Object(I["b"])("/accountCenter/v2/secret/decrypt?"+Object(S["c"])({},"post"),{data:Object(S["e"])("auth_data")}).then(function(t){if(0==t.error){if("alipay"==e.client_type){var n={uuid:t.data.data.user_id,openid:t.data.data.user_id,headimgurl:t.data.data.avatar,gender:"m"==t.data.data.gender?1:2,nickname:t.data.data.nick_name};Object(S["i"])("decrypt_data",n,"obj")}else"wechat"==e.client_type&&Object(S["i"])("decrypt_data",t.data.data,"obj");Object(I["b"])("/accountCenter/v2/auth/login?"+Object(S["c"])({},"post"),{uuid:Object(S["e"])("decrypt_data","obj").openid,code:t.data.code}).then(function(t){if(0==t.error)Object(S["i"])("token",t.data),e.getUserInfo();else if("11002"==t.error)e.$emit("getToken");else if("30005"==t.error||"11003"==t.error){var n=e;e.$store.commit("userInfo/changeUserStatus",!1),Object(r["a"])({message:"为了您的用户安全,请绑定手机号码"}),setTimeout(function(){n.$router.push({path:"/login"})},2e3)}else Object(r["a"])({message:t.msg})})}else"11002"==t.error?e.$emit("getToken"):Object(r["a"])({message:t.msg})}):(Object(S["h"])("auth_data"),Object(S["h"])("token"),location.reload());else{this.state=Math.random().toString(36).substr(2),Object(S["i"])("state",this.state);var t=this.GetUrlRelativePath();if(Object(S["i"])("authorized_redirect_uri",t),Object(S["f"])("iccid")){var n=Object(S["f"])("iccid");1==Object(S["b"])(n).state&&(Object(S["i"])("watch_card",n),Object(S["i"])("watchAutoSearch",1))}else Object(S["h"])("watch_card"),Object(S["h"])(watchAutoSearch);Object(I["a"])("/accountCenter/v2/oauth/authorize?"+Object(S["c"])({client_type:this.client_type,redirect_uri:"http://cardserver-test.china-m2m.com"+t,scope:"userinfo",state:this.state},"get")).then(function(t){0==t.error?location.href=t.data:"11002"==t.error?e.$emit("getToken"):Object(r["a"])({message:t.msg})})}else this.$store.commit("userInfo/changeUserStatus",!1)},methods:{plusReady:function(){localStorage.setItem("token",plus.storage.getItem("appToken"))},GetUrlRelativePath:function(){var e=document.location.toString(),t=e.split("//"),n=t[1].indexOf("/"),a=t[1].substring(n);return-1!=a.indexOf("?")&&(a=a.split("?")[0]),a},getUserInfo:function(){var e=this;Object(I["a"])("/accountCenter/v2/user/info?"+Object(S["c"])({},"get")).then(function(t){if(0==t.error){var n={account:t.data.account,avatar:t.data.avatar,nickname:t.data.nickname};Object(S["i"])("userInfo",n,"obj"),"wechat"!=e.client_type&&"alipay"!=e.client_type||(e.$store.commit("userInfo/changeUserStatus",!0),e.$store.commit("userInfo/changeUserInfo",n))}else"11002"==t.error?e.$emit("getToken"):Object(r["a"])({message:t.msg})})},showDoc:function(){g.alert({message:"钻石：翼联会员体系下通用虚拟货币,可以用于:购买套餐,充值话费,游戏娱乐,购买优惠商品;\nELB：可通过阅读微信文章、充值话费和活动套餐等方式免费领取，用于商品现金抵扣、游戏娱乐等"})}}},U=$,A=Object(C["a"])(U,o,s,!1,null,null,null);A.options.__file="layout.vue";t["default"]=A.exports},"0b6e":function(e,t,n){"use strict";var a=n("e27a"),o=n.n(a);o.a},"28a5":function(e,t,n){n("214f")("split",2,function(e,t,a){"use strict";var o=n("aae3"),s=a,i=[].push,c="split",r="length",l="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[r]||2!="ab"[c](/(?:ab)*/)[r]||4!="."[c](/(.?)(.?)/)[r]||"."[c](/()()/)[r]>1||""[c](/.?/)[r]){var u=void 0===/()??/.exec("")[1];a=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!o(e))return s.call(n,e,t);var a,c,d,f,b,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,v=void 0===t?4294967295:t>>>0,g=new RegExp(e.source,p+"g");u||(a=new RegExp("^"+g.source+"$(?!\\s)",p));while(c=g.exec(n)){if(d=c.index+c[0][r],d>m&&(h.push(n.slice(m,c.index)),!u&&c[r]>1&&c[0].replace(a,function(){for(b=1;b<arguments[r]-2;b++)void 0===arguments[b]&&(c[b]=void 0)}),c[r]>1&&c.index<n[r]&&i.apply(h,c.slice(1)),f=c[0][r],m=d,h[r]>=v))break;g[l]===c.index&&g[l]++}return m===n[r]?!f&&g.test("")||h.push(""):h.push(n.slice(m)),h[r]>v?h.slice(0,v):h}}else"0"[c](void 0,0)[r]&&(a=function(e,t){return void 0===e&&0===t?[]:s.call(this,e,t)});return[function(n,o){var s=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,s,o):a.call(String(s),n,o)},a]})},"2fcb":function(e,t,n){},c93e:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("a322");function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){Object(a["a"])(e,t,n[t])})}return e}},e27a:function(e,t,n){}}]);
//# sourceMappingURL=Layout.9d137c0a.js.map