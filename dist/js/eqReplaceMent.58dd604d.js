(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["eqReplaceMent"],{"40d9":function(e,t,a){"use strict";a.r(t);var s,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eqReplaceMent"},[a("div",{staticClass:"usage-wrap hide-user"},[a("div",{ref:"orderTop",staticClass:"order-top"},[a("ul",e._l(e.statusList,function(t,s){return a("li",{key:s,class:{checked:e.statusIndex==s},on:{click:function(t){e.changeStatus(s)}}},[e._v("\n          "+e._s(t)+"\n          "),a("span",{staticClass:"deco-border-arrow"})])}))]),a("div",{ref:"SwiperWwrap",staticClass:"swipe-wrap"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.statusIndex,expression:"statusIndex==0"}]},[a("ul",[0==e.currentType?a("li",[e._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:e.replaceData.model_name,expression:"replaceData.model_name"}],attrs:{placeholder:"请输入设备型号",type:"text"},domProps:{value:e.replaceData.model_name},on:{input:function(t){t.target.composing||e.$set(e.replaceData,"model_name",t.target.value)}}})]):e._e(),a("li",[e._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:e.replaceData.iccid,expression:"replaceData.iccid"}],attrs:{placeholder:"请输入要更换卡的卡号",type:"text"},domProps:{value:e.replaceData.iccid},on:{input:function(t){t.target.composing||e.$set(e.replaceData,"iccid",t.target.value)}}}),a("i",{staticClass:"scanCode",on:{click:function(t){e.scanIccid(1)}}})]),a("li",[e._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:e.replaceData.user_name,expression:"replaceData.user_name"}],attrs:{placeholder:"请输入收件人姓名",type:"text"},domProps:{value:e.replaceData.user_name},on:{input:function(t){t.target.composing||e.$set(e.replaceData,"user_name",t.target.value)}}})]),a("li",[e._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:e.replaceData.mobile,expression:"replaceData.mobile"}],attrs:{placeholder:"请输入老设备实名手机号",type:"number"},domProps:{value:e.replaceData.mobile},on:{input:function(t){t.target.composing||e.$set(e.replaceData,"mobile",t.target.value)}}})]),a("li",[e._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:e.replaceData.code,expression:"replaceData.code"}],attrs:{placeholder:"请输入短信验证码",type:"text"},domProps:{value:e.replaceData.code},on:{input:[function(t){t.target.composing||e.$set(e.replaceData,"code",t.target.value)},function(t){e.limlit()}]}}),a("span",{staticClass:"getCode",on:{click:function(t){e.getCode(e.replaceData.mobile)}}},[e._v(e._s(e.codeText))])]),a("li",[e._m(5),a("input",{directives:[{name:"model",rawName:"v-model",value:e.areaData,expression:"areaData"}],attrs:{placeholder:"请选择省市区街道",type:"text",readonly:""},domProps:{value:e.areaData},on:{focus:function(t){e.show=!0},input:function(t){t.target.composing||(e.areaData=t.target.value)}}})]),a("li",{attrs:{stye:"-webkit-user-select:text !important;"}},[e._m(6),a("input",{directives:[{name:"model",rawName:"v-model",value:e.replaceData.addr,expression:"replaceData.addr"}],attrs:{placeholder:"请输入详细地址",type:"text"},domProps:{value:e.replaceData.addr},on:{input:function(t){t.target.composing||e.$set(e.replaceData,"addr",t.target.value)}}})])]),a("div",{staticClass:"submitButton"},[a("div",{on:{click:function(t){e.submit()}}},[e._v("提交")]),a("div",[e._v("注：请仔细核对信息后再提交")]),a("div",[e._v("1.新卡1-3个工作日发出")]),a("div",[e._v("2.快件发出后方可在“物流查询”界面查询快递信息")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.statusIndex,expression:"statusIndex==1"}]},[e._l(e.replaceList,function(t,s){return a("div",{key:s,staticClass:"replaceList"},[a("div",{staticClass:"wrapBox1"},[t.model_name?a("div",{staticClass:"wrapBox2"},[a("div",[e._v("设备型号")]),a("div",[e._v(e._s(t.model_name))])]):e._e(),t.model_name?e._e():a("div",{staticClass:"wrapBox2"},[a("div"),a("div",[e._v("卡更换")])]),a("div",{staticClass:"wrapBox3"},[t.iccid?a("div",[a("span",[e._v("ICCID   ")]),a("span",[e._v(e._s(t.iccid))])]):e._e(),a("div",[a("span",[e._v("物流公司")]),t.express_name?a("span",[e._v(e._s(t.express_name))]):e._e(),t.express_name?e._e():a("span",[e._v("暂无物流信息")])]),a("div",[a("span",[e._v("快递单号")]),t.express_no?a("span",[e._v(e._s(t.express_no))]):e._e(),t.express_no?e._e():a("span",[e._v("暂无物流信息")])])])]),a("div",{staticClass:"wrapBox4"},[t.operator_at?a("div",[e._v(" 发货时间: "+e._s(t.operator_at)+" ")]):e._e(),t.operator_at?e._e():a("span",[e._v("暂无物流信息")]),t.operator_at?a("div",{staticClass:"cfmButton",class:{unreceived:1==t.plan_transfer}},[1!=t.plan_transfer?a("span",{on:{click:function(a){e.cfmButton(t.id,t.new_source,t.new_iccid)}}},[e._v("确认收货")]):e._e(),1==t.plan_transfer?a("span",[e._v("已收货")]):e._e()]):e._e()])])}),0==e.replaceList.length?a("div",{staticClass:"noMsg"},[e._v("暂无物流记录")]):e._e()],2)]),a("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("van-area",{attrs:{"area-list":e.areaList},on:{cancel:function(t){e.show=!1},confirm:e.getAreaList}})],1)],1)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("span",{staticClass:"redWord"},[e._v("*")]),e._v("  设备型号")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("span",{staticClass:"redWord"},[e._v("*")]),e._v(" ICCID卡号")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("span",{staticClass:"redWord"},[e._v("*")]),e._v(" 收件人姓名")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("span",{staticClass:"redWord"},[e._v("*")]),e._v(" 手机号码")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("span",{staticClass:"redWord"},[e._v("*")]),e._v(" 验证码")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("span",{staticClass:"redWord"},[e._v("*")]),e._v(" 所在地区")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("span",{staticClass:"redWord"},[e._v("*")]),e._v(" 详细地址")])}],n=(a("e17f"),a("2241")),c=(a("a481"),a("96cf"),a("3040")),o=(a("9a83"),a("f564")),l=a("a322"),u=(a("db2c"),a("1125")),p=(a("ac1e"),a("543e")),d=(a("8a58"),a("e41f")),m=(a("7f7f"),a("e7e5"),a("d399")),v=(a("cadf"),a("551c"),a("097d"),a("7212")),_=a("35df"),f=a("db04"),h=a("851b"),b={name:"index",components:(s={},Object(l["a"])(s,m["a"].name,m["a"]),Object(l["a"])(s,d["a"].name,d["a"]),Object(l["a"])(s,p["a"].name,p["a"]),Object(l["a"])(s,"swiper",v["swiper"]),Object(l["a"])(s,"swiperSlide",v["swiperSlide"]),Object(l["a"])(s,"vanArea",u["a"]),s),data:function(){var e=this;return{today:Object(_["b"])(),timeStamp:(new Date).getTime(),iccid:Object(_["j"])("check_iccid"),source:Object(_["j"])("check_realNameSource"),client_type:Object(_["d"])(),statusList:[],statusIndex:0,usageListObj:{},swiperOption:{on:{slideChangeTransitionEnd:function(t){e.statusIndex=this.activeIndex}}},replaceData:{model_name:"",user_name:"",mobile:"",code:"",province:"",city:"",district:"",addr:"",iccid:""},areaData:"",codeText:"获取验证码",countdown:60,show:!1,areaList:h["a"],replaceList:[],currentType:1,gift:2,youku_mobile:""}},created:function(){this.currentType=localStorage.getItem("replaceStatus")||1,0==this.currentType?this.statusList=["设备更换","物流查询"]:this.statusList=["卡更换","物流查询"]},computed:{},methods:{changeStatus:function(e){this.statusIndex=e,1==e&&this.getList(),this.replaceData={model_name:"",user_name:"",mobile:"",code:"",province:"",city:"",district:"",addr:"",iccid:""},this.areaData="",this.gift=2,this.youku_mobile=""},getList:function(){var e=this;Object(f["a"])("/api/v1/app/equipment/change/apply_list",{user_id:Object(_["j"])("userInfo","obj").account.user_id,type:this.currentType,offset:0,limit:999}).then(function(t){1==t.state?e.replaceList=t.data.rows:Object(o["a"])({message:t.msg})})},getCode:function(e){return e&&""!=e?/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.replaceData.mobile)?(this.countDownFun(),void Object(f["b"])("/api/v1/app/messages/send",{mobile:e,status:3}).then(function(e){1==e.state?Object(o["a"])({message:"验证码发送成功",background:"#60ce53"}):Object(o["a"])({message:e.msg})})):(Object(o["a"])({message:"请填写正确的手机号码"}),!1):(Object(o["a"])({message:"请填写手机号码"}),!1)},countDownFun:function(){var e=this,t=this;clearInterval(this.timer),this.timer=setInterval(function(){t.countdown<=0?(t.codeText="获取验证码",t.countdown=60,clearInterval(t.timer)):(t.codeText=e.countdown+"s",t.countdown--)},1e3)},getAreaList:function(e){this.areaData="",this.replaceData.province=e[0].name,this.replaceData.city=e[1].name,e[2]?this.replaceData.district=e[2].name:this.replaceData.district="";for(var t=[],a=0;a<e.length;a++)e[a]&&t.push(e[a].name);this.areaData=t.join("/"),this.show=!1},submit:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("alipay"===this.client_type||"wechat"===this.client_type){e.next=3;break}return Object(m["a"])({position:"top",message:"请在微信或支付宝客户端充值"}),e.abrupt("return");case 3:if(e.prev=3,this,/^[1-9]\d*$/.test(this.replaceData.code)){e.next=8;break}return Object(o["a"])({message:"请填写正确的验证码"}),e.abrupt("return",!1);case 8:if(0!=this.currentType){e.next=12;break}if(""!=this.replaceData.model_name){e.next=12;break}return Object(o["a"])({message:"请填写设备型号"}),e.abrupt("return",!1);case 12:if(""!=this.replaceData.iccid){e.next=15;break}return Object(o["a"])({message:"请填写卡号"}),e.abrupt("return",!1);case 15:if(""!=this.replaceData.user_name){e.next=18;break}return Object(o["a"])({message:"请填写收件人姓名"}),e.abrupt("return",!1);case 18:if(""!=this.replaceData.mobile){e.next=21;break}return Object(o["a"])({message:"请填写手机号"}),e.abrupt("return",!1);case 21:if(""!=this.replaceData.code){e.next=24;break}return Object(o["a"])({message:"请填写验证码"}),e.abrupt("return",!1);case 24:if(""!=this.replaceData.province&&""!=this.replaceData.city&&""!=this.replaceData.district){e.next=27;break}return Object(o["a"])({message:"请选择所在地区"}),e.abrupt("return",!1);case 27:if(""!=this.replaceData.addr){e.next=30;break}return Object(o["a"])({message:"请填写详细地址"}),e.abrupt("return",!1);case 30:if(!(this.replaceData.addr.length<3)){e.next=33;break}return Object(o["a"])({message:"详细地址过短"}),e.abrupt("return",!1);case 33:if(1!=this.gift){e.next=37;break}if(/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.youku_mobile)){e.next=37;break}return Object(o["a"])({message:"请填写正确优酷绑定的手机号"}),e.abrupt("return",!1);case 37:for(a in 2==this.gift&&(this.youku_mobile=""),t=this.replaceData,t)t[a]=String(t[a]).replace(/\s*/g,"");t.user_id=Object(_["j"])("userInfo","obj").account.user_id,t.type=this.currentType,t.gift=this.gift,t.youku_mobile=this.youku_mobile,this.cfmSubmit(t),e.next=50;break;case 47:e.prev=47,e.t0=e["catch"](3),Object(m["a"])({position:"top",message:e.t0.message});case 50:case"end":return e.stop()}},e,this,[[3,47]])}));return function(){return e.apply(this,arguments)}}(),scanIccid:function(e){var t=this;this.wx.scanQRCode({needResult:1,scanType:["barCode","qrCode"],success:function(e){var a=e.resultStr;a.indexOf(",")>-1&&(a=a.substr(a.indexOf(",")+1,a.length)),t.replaceData.iccid=a.replace(/\s*/g,"")}})},cfmButton:function(e,t,a){var s,r=this;s=35==t?"确认且实名":"确认",n["a"].confirm({title:"是否确认收货",message:"确认收货后套餐将自动转移到新卡",confirmButtonText:s}).then(function(){r.transferPlan(e,a)}).catch(function(){})},transferPlan:function(e,t){var a=this;Object(f["b"])("/api/v1/app/equipment/transfer",{id:e}).then(function(e){1==e.state?(0==Object(_["j"])("is_flow_card")&&a.activate(t),Object(o["a"])({message:"确认收货成功",background:"#60ce53"}),a.getList(),e.data&&(location.href=e.data)):Object(o["a"])({message:e.msg})})},cfmSubmit:function(e){var t=this;Object(f["b"])("/api/v1/app/equipment/change/apply",e).then(function(e){if(e.data||1!=e.state)if(/<[^>]+>/.test(e.data)){var a=document.createElement("div");a.innerHTML=e.data,document.body.appendChild(a),document.forms[0].submit()}else Object(o["a"])({message:e.msg});else Object(o["a"])({message:"提交成功",background:"#60ce53"}),t.replaceData={},t.areaData="",t.gift=2,t.youku_mobile=""})},getSource:function(e){var t=this,a=new Promise(function(e,a){Object(f["a"])("/api/v1/app/cards/details",{iccid:t.iccid}).then(function(t){1==t.state&&e(t.data.source)})});return a},activate:function(e){Object(f["a"])("/api/v1/app/cards/yd_allow_auth",{iccid:e,user_id:Object(_["j"])("userInfo","obj").account.user_id})},limlit:function(){8==this.replaceData.code.length&&(this.replaceData.code=this.replaceData.code.slice(0,4)),12==this.replaceData.code.length&&(this.replaceData.code=this.replaceData.code.slice(0,6))}}},g=b,D=(a("d230"),a("2877")),w=Object(D["a"])(g,r,i,!1,null,null,null);w.options.__file="eqReplaceMent.vue";t["default"]=w.exports},ab08:function(e,t,a){},d230:function(e,t,a){"use strict";var s=a("ab08"),r=a.n(s);r.a}}]);
//# sourceMappingURL=eqReplaceMent.58dd604d.js.map