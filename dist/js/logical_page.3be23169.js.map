{"version":3,"sources":["webpack:///./src/views/mifi/authority/index.vue?bc28","webpack:///src/views/mifi/authority/index.vue","webpack:///./src/views/mifi/authority/index.vue?d231","webpack:///./src/views/mifi/authority/index.vue","webpack:///./src/views/mifi/authority/index.vue?2f4a"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","authorityvue_type_script_lang_js_","name","components","_components","Object","defineProperty","popup","dialog","data","client_type","utilies","load_user_msg","load_user_info","redirect_uri","created","$router","push","path","decryptData","_this","alert","title","message","then","methods","_this2","http","res","error","aliUser","uuid","user_id","openid","headimgurl","avatar","gender","nickname","nick_name","wechatUserData","unionid","login","$emit","from","showAuthorityError","_this3","codeLog","code","_this4","flag","_flag","mifi_authorityvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/logical_page.3be23169.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"transaction-wrap\"},[_c('div',{staticClass:\"animation-wrap\"},[_c('div',{staticClass:\"loader-wrap\"})])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"transaction-wrap\">\r\n    <div class=\"animation-wrap\">\r\n      <div class=\"loader-wrap\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {Dialog, Popup} from 'vant'\r\n  import {_post} from \"../../../http\";\r\n  import {\r\n    getUrlParam,\r\n    getStorage,\r\n    setStorage,\r\n    removeStorage,\r\n    codeParam,\r\n    checkBrowser,\r\n    GetUrlRelativePath\r\n  } from \"../../../utilies\";\r\n\r\n  export default {\r\n    name: \"index\",\r\n    components: {\r\n      [Popup.name]: Popup,\r\n      [Dialog.name]: Dialog,\r\n    },\r\n    data() {\r\n      return {\r\n        client_type: checkBrowser(),\r\n        load_user_msg: false,\r\n        load_user_info: '正在授权,请等候',\r\n        redirect_uri: getStorage('authorized_redirect_uri')\r\n      }\r\n    },\r\n    created() {\r\n\r\n      if (!getStorage('token')) {\r\n        if (this.client_type === 'wechat' || this.client_type === 'alipay') {\r\n          if (getStorage('state') && getUrlParam('state') && getStorage('state') === getUrlParam('state')) {\r\n            this.decryptData();\r\n          } else {\r\n            let _this = this;\r\n            removeStorage('token');\r\n            removeStorage('state');\r\n\r\n            Dialog.alert({\r\n              title: '绑定失败',\r\n              message: '您的账号信息绑定失败,请重新授权绑定。',\r\n            }).then(() => {\r\n              _this.$router.push('/mifi/index');\r\n            })\r\n          }\r\n        } else {\r\n          this.$router.push('/mifi/card/lookup');\r\n        }\r\n\r\n      } else {\r\n        this.$router.push({path: '/mifi/card/lookup'});\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      decryptData() {\r\n        _post('/accountCenter/v2/secret/decrypt?' + codeParam({}, 'post'), {\r\n          data: getUrlParam('data')\r\n        }).then(res => {\r\n          if (res.error === 0) {\r\n            if (this.client_type === 'alipay') {\r\n              let aliUser = {\r\n                uuid: res.data.data.user_id,\r\n                openid: res.data.data.user_id,\r\n                headimgurl: res.data.data.avatar,\r\n                gender: res.data.data.gender == 'm' ? 1 : 2,\r\n                nickname: res.data.data.nick_name\r\n              };\r\n              setStorage('decrypt_data', aliUser, 'obj');\r\n            } else if (this.client_type === 'wechat') {\r\n              let wechatUserData = res.data.data;\r\n              if (wechatUserData.unionid) {\r\n                wechatUserData.openid = wechatUserData.unionid\r\n              }\r\n              setStorage('decrypt_data', wechatUserData, 'obj');\r\n            }\r\n            //login\r\n            this.login(res);\r\n\r\n          } else if (res.error === 11002) {\r\n            setStorage('refreshUrl', GetUrlRelativePath());\r\n            this.$emit(\"getToken\", {from: 'mifi'});\r\n          } else {\r\n            this.showAuthorityError('B' + res.error)\r\n          }\r\n        })\r\n      }, // 解密data\r\n      login(res) {\r\n        let _this = this;\r\n        const codeLog = res.data.code\r\n        _post('/accountCenter/v2/auth/login?' + codeParam({}, 'post'), {\r\n          uuid: getStorage('decrypt_data', 'obj').openid,\r\n          code: res.data.code\r\n        }).then(res => {\r\n          if (res.error === 0) {\r\n            setStorage('token', res.data, 'str', true);//获取token\r\n            getStorage('check_iccid') ? this.$router.push('/mifi/index') : this.$router.push('/mifi/card/lookup');\r\n          } else if (res.error === 11002) {\r\n            setStorage('refreshUrl', GetUrlRelativePath());\r\n            this.$emit('getToken', {from: 'mifi'})\r\n          } else if (res.error === 30005 || res.error === 11003) {\r\n            let _this = this;\r\n            // Dialog.alert({\r\n            //   title: '绑定信息',\r\n            //   message: '为了您的账号安全，需要绑定您的手机号码',\r\n            // }).then(() => {\r\n              _this.$router.push({path: '/binding'});\r\n            // })\r\n          } else {\r\n            this.showAuthorityError('L' + res.error + 'U-'+getStorage('decrypt_data', 'obj').openid+'Co-'+codeLog)\r\n          }\r\n        })\r\n      }, // 登录\r\n\r\n      showAuthorityError(flag) {\r\n        let _this = this;\r\n        let _flag = flag ? flag : '';\r\n        Dialog.alert({\r\n          title: '账号异常',\r\n          message: '您的账户信息存在问题,无法进行操作,请联系我司客服工作人员,我们将尽快为您解决问题' + _flag + '。',\r\n        }).then(() => {\r\n          _this.load_user_msg = true;\r\n          _this.load_user_info = '账号异常' + _flag;\r\n\r\n        })\r\n      },// 拦截错误信息\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  .transaction-wrap, .animation-wrap {\r\n    height: 100%;\r\n  }\r\n\r\n  .animation-wrap {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-size: 50px;\r\n    color: #f8b43e;\r\n    -webkit-transition: .3s color, .3s border;\r\n    transition: .3s color, .3s border;\r\n  }\r\n\r\n  [class*=\"loader-\"] {\r\n    display: inline-block;\r\n    width: 1em;\r\n    height: 1em;\r\n    color: inherit;\r\n    vertical-align: middle;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .loader-wrap {\r\n    border-radius: 50%;\r\n    box-shadow: 0 1em 0 -.2em currentcolor;\r\n    position: relative;\r\n    -webkit-animation: loader-wrap 0.8s ease-in-out alternate infinite;\r\n    animation: loader-wrap 0.8s ease-in-out alternate infinite;\r\n    -webkit-animation-delay: 0.32s;\r\n    animation-delay: 0.32s;\r\n    top: -1em;\r\n  }\r\n\r\n  .loader-wrap:after,\r\n  .loader-wrap:before {\r\n    content: '';\r\n    position: absolute;\r\n    width: inherit;\r\n    height: inherit;\r\n    border-radius: inherit;\r\n    box-shadow: inherit;\r\n    -webkit-animation: inherit;\r\n    animation: inherit;\r\n  }\r\n\r\n  .loader-wrap:before {\r\n    left: -1em;\r\n    -webkit-animation-delay: 0.48s;\r\n    animation-delay: 0.48s;\r\n  }\r\n\r\n  .loader-wrap:after {\r\n    right: -1em;\r\n    -webkit-animation-delay: 0.16s;\r\n    animation-delay: 0.16s;\r\n  }\r\n\r\n  @-webkit-keyframes loader-wrap {\r\n    0% {\r\n      box-shadow: 0 2em 0 -.2em currentcolor;\r\n    }\r\n    100% {\r\n      box-shadow: 0 1em 0 -.2em currentcolor;\r\n    }\r\n  }\r\n\r\n  @keyframes loader-wrap {\r\n    0% {\r\n      box-shadow: 0 2em 0 -.2em currentcolor;\r\n    }\r\n    100% {\r\n      box-shadow: 0 1em 0 -.2em currentcolor;\r\n    }\r\n  }\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2e6bf70e&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}