(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mifi_layout"],{"0b6e":function(e,t,a){"use strict";var s=a("e27a"),r=a.n(s);r.a},"5f6f":function(e,t,a){"use strict";a.r(t);var s,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inner-wrap"},[a("router-view",{on:{getUserData:e.getUserInfo}}),a("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:e.load_user_msg,callback:function(t){e.load_user_msg=t},expression:"load_user_msg"}},[a("p",{staticClass:"showTip"},[e._v(e._s(e.load_user_info))])]),a("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[a("p",{staticClass:"showTip"},[e._v(e._s(e.errorMsg))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoading,expression:"showLoading"}],staticClass:"loading-wrap"},[a("div",{staticClass:"loading-inner"},[a("van-loading",{attrs:{size:"50px"}})],1)])],1)},n=[],o=(a("28a5"),a("6b54"),a("c93e")),i=a("a322"),c=(a("ac1e"),a("543e")),u=(a("8a58"),a("e41f")),l=(a("9a83"),a("f564")),f=(a("7f7f"),a("e17f"),a("2241")),h=a("2f62"),m=a("c5dc"),p=a("db04"),_=a("35df"),d={name:"App",data:function(){return{client_type:Object(_["c"])(),state:"",appContext:!1,load_user_msg:!1,load_user_info:"加载用户信息,请等候"}},components:(s={userHeader:m["a"]},Object(i["a"])(s,f["a"].name,f["a"]),Object(i["a"])(s,l["a"].name,l["a"]),Object(i["a"])(s,u["a"].name,u["a"]),Object(i["a"])(s,c["a"].name,c["a"]),s),computed:Object(o["a"])({},Object(h["b"])({isShowUser:function(e){return e.userInfo.showUser},authorizeUserInfo:function(e){return e.userInfo.userInfoInner},showLoading:function(e){return e.mifiCommon.intercept.loading},showError:function(e){return e.mifiCommon.intercept.show},errorMsg:function(e){return e.mifiCommon.intercept.errorMsg}}),{showError:{get:function(){return this.$store.state.mifiCommon.intercept.show},set:function(e){return this.$store.state.mifiCommon.intercept.show=e.show}}}),created:function(){Object(_["m"])("timeSpan",0),this.authorized()},methods:{authorized:function(){if("wechat"==this.client_type||"alipay"==this.client_type||"app"==this.client_type){if("app"!=this.client_type){if(Object(_["h"])("userInfo","obj")){this.$store.commit("userInfo/changeUserStatus",!0);var e=document.querySelector(".user-wrap");e&&Object(_["m"])("userHeight",e.offsetHeight)}("wechat"==this.client_type&&Object(_["h"])("wechat_version")!=this.global_variables.version||"alipay"==this.client_type&&Object(_["h"])("alipay_version")!=this.global_variables.version)&&(Object(_["l"])("token"),Object(_["l"])("state"))}if(Object(_["h"])("token"))this.getUserInfo();else{var t=this;f["a"].alert({title:"授权",message:"为了您的账号安全，我们需要您对本站进行授权操作并绑定账号。"}).then(function(){t.authorizedRediect()})}}else this.$store.commit("userInfo/changeUserStatus",!1)},GetUrlRelativePath:function(){var e=document.location.toString(),t=e.split("//"),a=t[1].indexOf("/"),s=t[1].substring(a);return-1!=s.indexOf("?")&&(s=s.split("?")[0]),s},getUserInfo:function(){var e=this;this.load_user_msg=!0,Object(p["a"])("/accountCenter/v2/user/info?"+Object(_["e"])({},"get")).then(function(t){if(e.load_user_msg=!1,0==t.error)if(t.data&&"{}"!=JSON.stringify(t.data)){var a={account:t.data.account,avatar:t.data.avatar,nickname:t.data.nickname};if(Object(_["m"])("userInfo",a,"obj"),"wechat"==e.client_type||"alipay"==e.client_type){e.$store.commit("userInfo/changeUserStatus",!0),e.$store.commit("userInfo/changeUserInfo",a);var s=document.querySelector(".user-wrap");s&&Object(_["m"])("userHeight",s.offsetHeight)}e.load_user_msg=!1}else{var r=e;f["a"].alert({title:"账号异常",message:"您的账户信息存在问题,无法进行操作,请联系我司客服工作人员,我们将尽快为您解决问题。"}).then(function(){r.load_user_msg=!0,r.load_user_info="账号异常"})}else if("11002"==t.error)Object(_["m"])("refreshUrl",Object(_["a"])()),e.$emit("getToken",{from:"mifi"});else if("10007"==t.error){var n=Date.parse(new Date)/1e3,o=t.extra-n;Object(_["m"])("timeSpan",o),e.getUserInfo()}else t.status||t.error?e.showAuthorityError("A"+t.error):e.showAuthorityError("A-R"+JSON.stringify(t))})},showDoc:function(){f["a"].alert({message:"钻石：翼联会员体系下通用虚拟货币,可以用于:购买套餐,充值话费,游戏娱乐,购买优惠商品;\nELB：可通过阅读微信文章、充值话费和活动套餐等方式免费领取，用于商品现金抵扣、游戏娱乐等"})},authorizedRediect:function(){var e=this;this.state=Math.random().toString(36).substr(2)+(new Date).getTime(),Object(_["m"])("state",this.state),Object(p["a"])("/accountCenter/v2/oauth/authorize?"+Object(_["e"])({client_type:this.client_type,redirect_uri:this.global_variables.authorized_redirect_url+"/mifi/transaction",scope:"userinfo",state:this.state},"get")).then(function(t){0==t.error?("wechat"==e.client_type?Object(_["m"])("wechat_version",e.global_variables.version):"alipay"==e.client_type&&Object(_["m"])("alipay_version",e.global_variables.version),location.href=t.data):"11002"==t.error?(Object(_["m"])("refreshUrl",Object(_["a"])()),e.$emit("getToken",{from:"mifi"})):e.this.showAuthorityError("C"+t.error)})},showAuthorityError:function(e){var t=this,a=e||"";f["a"].alert({title:"账号异常",message:"您的账户信息存在问题,无法进行操作,请联系我司客服工作人员,我们将尽快为您解决问题"+a+"。"}).then(function(){t.load_user_msg=!0,t.load_user_info="账号异常"+a})}}},b=d,v=a("2877"),g=Object(v["a"])(b,r,n,!1,null,null,null);g.options.__file="mifi_layout.vue";t["default"]=g.exports},c5dc:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-wrap"},[a("div",{staticClass:"user-inner-wrap"},[a("div",{staticClass:"user-name-wrap"},[a("img",{attrs:{src:e.getUserInfo.avatar}}),a("span",{staticClass:"user-name"},[e._v(e._s(e.getUserInfo.nickname))])]),a("div",[a("span",[e._v("钻石:")]),a("span",{staticClass:"icon-diamond-wrap",on:{click:function(t){e.showDoc(0)}}},[a("i",{staticClass:"icon-user-size  icon-diamond"}),e._v("\n                      "+e._s(e.getUserInfo.account.rmb)+"\n                  ")]),a("span",[e._v("ELB:")]),a("span",{staticClass:"icon-elb-wrap",on:{click:function(t){e.showDoc(1)}}},[a("i",{staticClass:"icon-user-size icon-elb"}),e._v("\n                      "+e._s(e.getUserInfo.account.elb)+"\n                  ")])])])])},r=[],n=a("a322"),o=(a("7f7f"),a("e17f"),a("2241")),i=a("c93e"),c=a("2f62"),u={name:"uesrHead",props:{userInfoData:{type:Object}},computed:Object(i["a"])({},Object(c["b"])({getUserInfo:function(e){return e.userInfo.userInfoInner}})),components:Object(n["a"])({},o["a"].name,o["a"]),methods:{showDoc:function(e){var t;t=0==e?"钻石：翼联会员体系下通用虚拟货币,可以用于:购买套餐,充值话费,游戏娱乐,购买优惠商品;":"ELB：可通过阅读微信文章、充值话费和活动套餐等方式免费领取，用于商品现金抵扣、游戏娱乐等;",o["a"].alert({message:t})}}},l=u,f=(a("0b6e"),a("2877")),h=Object(f["a"])(l,s,r,!1,null,null,null);h.options.__file="uesrHead.vue";t["a"]=h.exports},e27a:function(e,t,a){}}]);
//# sourceMappingURL=mifi_layout.04e4de7d.js.map