(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mifi_card_lookup"],{"207a":function(t,e,r){},"24b9":function(t,e,r){t.exports=r.p+"img/scanTop.5a342865.png"},3040:function(t,e,r){"use strict";function i(t){return function(){var e=this,r=arguments;return new Promise(function(i,n){var c=t.apply(e,r);function a(t,e){try{var r=c[t](e),a=r.value}catch(t){return void n(t)}r.done?i(a):Promise.resolve(a).then(o,s)}function o(t){a("next",t)}function s(t){a("throw",t)}o()})}}r.d(e,"a",function(){return i})},"4e3c":function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"btn-wrap"},[r("button",{class:{disabled:t.btnState},attrs:{disabled:t.btnState},on:{click:t.clickThrotle}},[t._v("\n    "+t._s(t.btnText)+"\n    ")])])},n=[],c={name:"btn-common",props:{btnText:{type:String}},data:function(){return{btnState:!1,timer:null}},created:function(){},methods:{clickThrotle:function(){var t=this;this.$emit("clickThrotle"),this.btnState=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){t.btnState=!1},2e3)}}},a=c,o=(r("d9ae"),r("2877")),s=Object(o["a"])(a,i,n,!1,null,null,null);s.options.__file="index.vue";e["a"]=s.exports},"72e8":function(t,e,r){"use strict";var i=r("207a"),n=r.n(i);n.a},"96cf":function(t,e){!function(e){"use strict";var r,i=Object.prototype,n=i.hasOwnProperty,c="function"===typeof Symbol?Symbol:{},a=c.iterator||"@@iterator",o=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag",h="object"===typeof t,u=e.regeneratorRuntime;if(u)h&&(t.exports=u);else{u=e.regeneratorRuntime=h?t.exports:{},u.wrap=b;var l="suspendedStart",d="suspendedYield",f="executing",p="completed",m={},g={};g[a]=function(){return this};var v=Object.getPrototypeOf,_=v&&v(v($([])));_&&_!==i&&n.call(_,a)&&(g=_);var w=x.prototype=j.prototype=Object.create(g);O.prototype=w.constructor=x,x.constructor=O,x[s]=O.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===O||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(w),t},u.awrap=function(t){return{__await:t}},k(C.prototype),C.prototype[o]=function(){return this},u.AsyncIterator=C,u.async=function(t,e,r,i){var n=new C(b(t,e,r,i));return u.isGeneratorFunction(e)?n:n.next().then(function(t){return t.done?t.value:n.next()})},k(w),w[s]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var i=e.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},u.values=$,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,n){return o.type="throw",o.arg=t,e.next=i,n&&(e.method="next",e.arg=r),!!n}for(var c=this.tryEntries.length-1;c>=0;--c){var a=this.tryEntries[c],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(s&&h){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var c=i;break}}c&&("break"===t||"continue"===t)&&c.tryLoc<=e&&e<=c.finallyLoc&&(c=null);var a=c?c.completion:{};return a.type=t,a.arg=e,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;L(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:$(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=r),m}}}function b(t,e,r,i){var n=e&&e.prototype instanceof j?e:j,c=Object.create(n.prototype),a=new E(i||[]);return c._invoke=I(t,r,a),c}function y(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function j(){}function O(){}function x(){}function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function C(t){function e(r,i,c,a){var o=y(t[r],t,i);if("throw"!==o.type){var s=o.arg,h=s.value;return h&&"object"===typeof h&&n.call(h,"__await")?Promise.resolve(h.__await).then(function(t){e("next",t,c,a)},function(t){e("throw",t,c,a)}):Promise.resolve(h).then(function(t){s.value=t,c(s)},a)}a(o.arg)}var r;function i(t,i){function n(){return new Promise(function(r,n){e(t,i,r,n)})}return r=r?r.then(n,n):n()}this._invoke=i}function I(t,e,r){var i=l;return function(n,c){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===n)throw c;return q()}r.method=n,r.arg=c;while(1){var a=r.delegate;if(a){var o=T(a,r);if(o){if(o===m)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===l)throw i=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var s=y(t,e,r);if("normal"===s.type){if(i=r.done?p:d,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=p,r.method="throw",r.arg=s.arg)}}}function T(t,e){var i=t.iterator[e.method];if(i===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,T(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=y(i,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,m;var c=n.arg;return c?c.done?(e[t.resultName]=c.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,m):c:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function $(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,c=function e(){while(++i<t.length)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=r,e.done=!0,e};return c.next=c}}return{next:q}}function q(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},a481:function(t,e,r){r("214f")("replace",2,function(t,e,r){return[function(i,n){"use strict";var c=t(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,c,n):r.call(String(c),i,n)},r]})},cd1e:function(t,e,r){"use strict";r.r(e);var i,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"check-card-wrap"},[i("div",{ref:"ref_top",staticClass:"scanTop-wrap"},[i("img",{attrs:{src:r("24b9"),alt:""}})]),i("div",{ref:"ref_search",staticClass:"search-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.iccid,expression:"iccid"}],ref:"iccidDom",attrs:{placeholder:"扫码或手动输入iccid号或11位电话号",type:"text"},domProps:{value:t.iccid},on:{focus:t.handleIccidFocus,blur:function(e){return e.preventDefault(),t.iccidBlur(e)},input:function(e){e.target.composing||(t.iccid=e.target.value)}}}),i("span",{directives:[{name:"show",rawName:"v-show",value:t.showClearBtn,expression:"showClearBtn"}],staticClass:"clearIccid",on:{click:t.clearInputIccid}},[t._v("×")]),i("span",{staticClass:"iconfont icon-scan bounceIn animated",on:{click:t.testClick}})]),i("div",{ref:"ref_button",staticClass:"btn-check-wrap"},[i("card-button",{attrs:{btnText:"查询"},on:{clickThrotle:function(e){t.searchIccid(t.iccid)}}}),"iphone"!==this.global_variables.device?i("a",{staticClass:"advert",attrs:{target:"_Blank",href:t.advertisement}}):t._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.recording_show,expression:"recording_show"}],staticClass:"recording-wrap"},[i("p",{ref:"recording_title",staticClass:"recording-title"},[i("span",[t._v("历史搜索记录")]),i("span",[t._v(t._s(t.recording_list.length)+"条")])]),i("ul",{ref:"main_recording",staticClass:"recording-list-wrap"},t._l(t.recording_list,function(e,r){return i("li",[i("span",{on:{click:function(r){t.searchIccid(e.iccid)}}},[t._v(t._s(e.iccid))]),i("span",[t._v(t._s(e.searchTime))]),i("span",{on:{click:function(r){t.deleteIccid(e.iccid)}}},[t._v("×")])])}))])])},c=[],a=(r("55dd"),r("6762"),r("e17f"),r("2241")),o=(r("96cf"),r("3040")),s=(r("a481"),r("9a83"),r("f564")),h=r("a322"),u=(r("7f7f"),r("8a58"),r("e41f")),l=(r("cadf"),r("551c"),r("097d"),r("35df")),d=r("db04"),f=r("4e3c"),p={name:"home",data:function(){return{advertisement:"https://interaction.clotfun.online/horse?appkey=db8a11aa22c93a1fa17fb5d7756288dc&adSpaceKey=eb7cfa98ab24d3fce04352f258f83e97&from=H5&1=1",sort_recording_list:{},recording_list:[],recording_show:!1,iccid:"",client_type:Object(l["d"])(),showClearBtn:!1}},components:(i={},Object(h["a"])(i,u["a"].name,u["a"]),Object(h["a"])(i,"cardButton",f["a"]),i),created:function(){var t=this;this.$store.commit("mifiCommon/changeErrStatus",{show:!1});var e=this;if(Object(l["j"])("recording_list","arr")){var r=Object(l["j"])("recording_list","arr");r.length&&(this.recording_list=r,this.recording_show=!0)}Object(l["j"])("new_auth_search_iccid")?this.iccid=Object(l["j"])("new_auth_search_iccid"):Object(l["j"])("check_iccid")&&(this.iccid=Object(l["j"])("check_iccid")),this.$watch("iccid",this.debounce(function(t){e.handleIccidFocus()},500));var i=Object(l["k"])("iccid")||Object(l["j"])("watch_card");if(i&&1===this.checkSearchIccid(i).state)if(Object(l["j"])("watchAutoSearch")>2&&(Object(l["p"])("watch_card"),Object(l["p"])("watchAutoSearch")),Object(l["j"])("watch_card_timestamp")){var n=Object(l["j"])("watch_card_timestamp"),c=(new Date).getTime();if(c>n){var a=(new Date).getTime()+6e4;Object(l["q"])("check_iccid",i),Object(l["q"])("watch_card_timestamp",a),this.processCheckIccid(i)}}else{this.iccid=i,Object(l["q"])("check_iccid",i);var o=(new Date).setTime((new Date).getTime()+6e4);Object(l["q"])("watch_card_timestamp",o),this.processCheckIccid(i)}else i&&Object(s["a"])({message:this.checkSearchIccid(i).msg});this.recording_show&&this.$nextTick(function(){var e=document.documentElement.clientHeight||document.body.clientHeight,r=t.$refs.ref_top.offsetHeight,i=t.$refs.ref_search.offsetHeight,n=t.$refs.ref_button.offsetHeight,c=t.$refs.recording_title.offsetHeight;t.$refs.main_recording.style.height=e-r-i-n-c-50+"px"})},methods:{testClick:function(){var t=this;"wechat"===this.client_type?this.wx.scanQRCode({needResult:1,scanType:["barCode","qrCode"],success:function(e){var r=e.resultStr;r.indexOf(",")>-1&&(r=r.substr(r.indexOf(",")+1,r.length)),t.iccid=r.replace(/\s*/g,""),t.processCheckIccid(t.iccid)}}):"alipay"===this.client_type&&ap.scan(function(e){var r=e.code;t.iccid=r.replace(/\s*/g,""),t.processCheckIccid(t.iccid)})},searchIccid:function(t){t?this.checkSearchIccid(t).state?this.processCheckIccid(t):Object(s["a"])({message:this.checkSearchIccid(t).msg}):Object(s["a"])({message:"请输入ICCID"})},processCheckIccid:function(t){var e=this;this.$store.commit("mifiCommon/changeLoadingStatus",{flag:!0}),Object(d["b"])("/api/v1/app/new_auth/check_auth_",{iccid:t}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(r){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.commit("mifiCommon/changeLoadingStatus",{flag:!1}),i=Object(l["j"])("watchAutoSearch"),i&&(i++,Object(l["q"])("watchAutoSearch",i)),1!==r.state){t.next=15;break}if(1!==r.data.is_qiyu){t.next=7;break}return Object(s["a"])({message:"此卡不属于物联网M2M服务平台"}),t.abrupt("return");case 7:Object(l["q"])("check_iccid",r.data.iccid),Object(l["q"])("new_auth_search_iccid",r.data.iccid),e.recordingIccid({iccid:r.data.iccid,realname:!(2===r.data.status||3===r.data.status)}),1===r.data.status&&e.$router.push({path:"/mifi/card/index"}),2===r.data.status&&e.toRealname(r.data.iccid,r.data.source),3===r.data.status&&e.$router.push({path:"/mifi/plan/group"}),t.next=16;break;case 15:11022===r.state?a["a"].alert({message:"此卡已过期，即将前往换卡页面"}).then(function(){e.$router.push({path:"/weixin/question/eqReplaceMent"})}):Object(s["a"])({message:r.msg});case 16:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},toRealname:function(t,e){var r=this,i=[45,46],n=!1;i.includes(e)&&(n=!0),Object(l["q"])("check_realNameSource",e),Object(d["a"])("/api/v1/app/cards/realname",{iccid:t}).then(function(i){1===i.data||n?window.location.href="".concat(r.global_variables.realname_url,"?iccid=").concat(t,"&source=").concat(e,"&urlType=2"):r.$router.push({path:"/weixin/new_card/real_name",query:{from:"mifi"}})})},recordingIccid:function(t){var e=!1;this.recording_list.length?(this.recording_list.map(function(r,i){r.iccid===t.iccid&&(r.searchTime=Object(l["h"])().searchTime,r.millisecond=Object(l["h"])().millisecond,r.realname=t.realname,e=!0)}),e||this.recording_list.push({iccid:t.iccid,searchTime:Object(l["h"])().searchTime,millisecond:Object(l["h"])().millisecond,realname:t.realname})):(this.recording_list.push({iccid:t.iccid,searchTime:Object(l["h"])().searchTime,millisecond:Object(l["h"])().millisecond,realname:t.realname}),this.recording_show=!0),this.recording_list.sort(this.compare("millisecond")),this.recording_list.length>20&&this.recording_list.splice(20),Object(l["q"])("recording_list",this.recording_list,"arr",!0)},scanIccid:function(){var t=this;"wechat"===this.client_type?this.wx.ready(function(){console.log(t.wx),t.wx.scanQRCode({needResult:1,scanType:["barCode","qrCode"],success:function(e){var r=e.resultStr;r.indexOf(",")>-1&&(r=r.substr(r.indexOf(",")+1,r.length)),t.iccid=r.replace(/\s*/g,""),t.processCheckIccid(t.iccid)}})}):"alipay"===this.client_type&&ap.scan(function(e){var r=e.code;t.iccid=r.replace(/\s*/g,""),t.processCheckIccid(t.iccid)})},inArray:function(t,e,r){return null==e?-1:e.indexOf(t,r)},compare:function(t){return function(e,r){var i=e[t],n=r[t];return n-i}},checkSearchIccid:function(t){return t?(t.length<19||t.length>20||"89"!==t.substr(0,2))&&13!==t.length&&11!==t.length&&15!==t.length&&16!==t.length?{state:0,msg:"ICCID有误,请检查"}:{state:1}:{state:0,msg:"请输入ICCID"}},deleteIccid:function(t){for(var e=-1,r=0;r<this.recording_list.length;r++)if(this.recording_list[r].iccid===t){e=r;break}e>=0&&(this.recording_list.splice(e,1),Object(l["q"])("recording_list",this.recording_list,"arr")),this.recording_list.length||(this.recording_show=!1)},handleIccidFocus:function(){this.iccid?this.showClearBtn=!0:this.showClearBtn=!1},clearInputIccid:function(){this.iccid="",this.$refs.iccidDom.focus(),this.showClearBtn=!1},iccidBlur:function(){this.showClearBtn=!1},debounce:function(t,e){var r,i=this;return function(){for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];r&&clearTimeout(r),r=setTimeout(function(){t.apply(i,c)},e)}},getSource:function(t){var e=this,r=new Promise(function(t,r){Object(d["a"])("/api/v1/app/cards/details",{iccid:e.iccid}).then(function(e){1==e.state&&t(e.data.source)})});return r},toChangeCard:function(){this.$router.push({name:"eqReplaceMent",params:{status:1}}),localStorage.setItem("replaceStatus",1)}}},m=p,g=(r("72e8"),r("2877")),v=Object(g["a"])(m,n,c,!1,null,null,null);v.options.__file="lookup.vue";e["default"]=v.exports},d9ae:function(t,e,r){"use strict";var i=r("dca3"),n=r.n(i);n.a},dca3:function(t,e,r){}}]);
//# sourceMappingURL=mifi_card_lookup.87242412.js.map