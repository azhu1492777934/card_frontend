(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["card_lookup"],{1892:function(e,t,c){"use strict";var i=c("75b0"),n=c.n(i);n.a},"24b9":function(e,t,c){e.exports=c.p+"img/scanTop.5a342865.png"},"4e3c":function(e,t,c){"use strict";var i=function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("div",{staticClass:"btn-wrap"},[c("button",{class:{disabled:e.btnState},attrs:{disabled:e.btnState},on:{click:e.clickThrotle}},[e._v("\n    "+e._s(e.btnText)+"\n    ")])])},n=[],a={name:"btn-common",props:{btnText:{type:String}},data:function(){return{btnState:!1,timer:null}},created:function(){},methods:{clickThrotle:function(){var e=this;this.$emit("clickThrotle"),this.btnState=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){e.btnState=!1},2e3)}}},r=a,s=(c("d9ae"),c("2877")),o=Object(s["a"])(r,i,n,!1,null,null,null);o.options.__file="index.vue";t["a"]=o.exports},6648:function(e,t,c){"use strict";c.r(t);var i=function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("div",{staticClass:"check-card-wrap"},[e._m(0),c("div",{staticClass:"search-wrap"},[c("input",{directives:[{name:"model",rawName:"v-model",value:e.iccid,expression:"iccid"}],ref:"iccidDom",attrs:{placeholder:"扫码或手动输入iccid号或11位电话号",type:"text"},domProps:{value:e.iccid},on:{focus:e.handleIccidFocus,blur:function(t){return t.preventDefault(),e.iccidBlur(t)},input:function(t){t.target.composing||(e.iccid=t.target.value)}}}),c("span",{directives:[{name:"show",rawName:"v-show",value:e.showClearBtn,expression:"showClearBtn"}],staticClass:"clearIccid",on:{click:e.clearInputIccid}},[e._v("×")]),c("span",{directives:[{name:"show",rawName:"v-show",value:"app"!=e.client_type,expression:"client_type!='app'"}],staticClass:"iconfont icon-scan bounceIn animated",on:{click:e.scanIccid}}),c("span",{directives:[{name:"show",rawName:"v-show",value:"app"!=e.client_type,expression:"client_type!='app'"}],staticClass:"icon-scanTip"})]),c("div",{staticClass:"btn-check-wrap"},[c("card-button",{attrs:{btnText:"查询"},on:{clickThrotle:function(t){e.searchIccid(e.iccid)}}})],1),c("div",{directives:[{name:"show",rawName:"v-show",value:e.recording_show,expression:"recording_show"}],staticClass:"recording-wrap"},[c("p",{staticClass:"recording-title"},[c("span",[e._v("历史搜索记录")]),c("span",[e._v(e._s(e.recording_list.length)+"条")])]),c("ul",{staticClass:"recording-list-wrap"},e._l(e.recording_list,function(t,i){return c("li",[c("span",{on:{click:function(c){e.searchIccid(t.iccid)}}},[e._v(e._s(t.iccid))]),c("span",[e._v(e._s(t.searchTime))]),c("span",{on:{click:function(c){e.deleteIccid(t.iccid)}}},[e._v("×")])])}))]),c("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:e.forbidden_click,callback:function(t){e.forbidden_click=t},expression:"forbidden_click"}})],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scanTop-wrap"},[i("img",{attrs:{src:c("24b9"),alt:""}})])}],a=(c("55dd"),c("a481"),c("9a83"),c("f564")),r=c("a322"),s=(c("e7e5"),c("d399")),o=(c("7f7f"),c("8a58"),c("e41f")),l=(c("cadf"),c("551c"),c("097d"),c("35df")),d=c("db04"),u=c("4e3c"),h=function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("div",{staticClass:"empty-wrapper"},[c("div",{staticClass:"empty-inner"},[c("van-icon",{attrs:{name:e.name,size:e.size,color:e.color}}),c("div",{staticClass:"text-wrapper"},[e._v(e._s(e.text))])],1)])},f=[],p=(c("68ef"),c("09fe"),c("ad06")),m=(c("c5f6"),{name:"index",props:{name:{type:String,default:"warn-o"},text:{type:String,default:"暂无数据"},color:{type:String,default:"#323233"},size:{type:Number,default:40}},components:Object(r["a"])({},p["a"].name,p["a"])}),b=m,g=(c("1892"),c("2877")),v=Object(g["a"])(b,h,f,!1,null,null,null);v.options.__file="index.vue";var _,w=v.exports,O={name:"home",data:function(){return{sort_recording_list:{},recording_list:[],recording_show:!1,iccid:"",checkShow:!0,client_type:Object(l["c"])(),showClearBtn:!1,forbidden_click:!0}},components:(_={},Object(r["a"])(_,o["a"].name,o["a"]),Object(r["a"])(_,s["a"].name,s["a"]),Object(r["a"])(_,"Empty",w),Object(r["a"])(_,"cardButton",u["a"]),_),created:function(){("wechat"!==this.client_type||"alipay"!==this.client_type||"app"!==this.client_type||Object(l["h"])("token"))&&(this.forbidden_click=!1),Object(l["h"])("userInfo","obj")&&Object(l["k"])({type:2,user_id:Object(l["h"])("userInfo","obj")?Object(l["h"])("userInfo","obj").account.user_id:""});var e=this;if(Object(l["h"])("recording_list","arr")){var t=Object(l["h"])("recording_list","arr");t.length&&(this.recording_list=t,this.recording_show=!0)}Object(l["h"])("new_auth_search_iccid")?this.iccid=Object(l["h"])("new_auth_search_iccid"):Object(l["h"])("check_iccid")&&(this.iccid=Object(l["h"])("check_iccid")),this.$watch("iccid",this.debounce(function(t){e.handleIccidFocus()},500));var c=Object(l["i"])("iccid")||Object(l["h"])("watch_card");if(c&&1===this.checkSearchIccid(c).state)if(Object(l["h"])("watchAutoSearch")>2&&(Object(l["l"])("watch_card"),Object(l["l"])("watchAutoSearch")),Object(l["h"])("watch_card_timestamp")){var i=Object(l["h"])("watch_card_timestamp"),n=(new Date).getTime();if(n>i){var r=(new Date).getTime()+6e4;Object(l["m"])("check_iccid",c),Object(l["m"])("watch_card_timestamp",r),this.processCheckIccid(c)}}else{this.iccid=c,Object(l["m"])("check_iccid",c);var s=(new Date).setTime((new Date).getTime()+6e4);Object(l["m"])("watch_card_timestamp",s),this.processCheckIccid(c)}else c&&Object(a["a"])({message:this.checkSearchIccid(c).msg})},methods:{searchIccid:function(e){e?this.checkSearchIccid(e).state?this.processCheckIccid(e):Object(a["a"])({message:this.checkSearchIccid(e).msg}):Object(a["a"])({message:"请输入ICCID"})},processCheckIccid:function(e){var t;t=/[a-zA-Z]/.test(e.replace(/\s/g,"").charAt(e.length-1))?e.replace(/\s/g,"").substr(0,e.length-1):e.replace(/\s/g,""),s["a"].loading({mask:!0,message:"查询中,请等候",forbidClick:!0,duration:0});var c=!1,i=this;this.recording_list.length?(this.recording_list.map(function(e,i){e.iccid===t&&(e.searchTime=Object(l["f"])().searchTime,e.millisecond=Object(l["f"])().millisecond,c=!0)}),c||this.recording_list.push({iccid:t,searchTime:Object(l["f"])().searchTime,millisecond:Object(l["f"])().millisecond})):(this.recording_list.push({iccid:t,searchTime:Object(l["f"])().searchTime,millisecond:Object(l["f"])().millisecond}),this.recording_show=!0),this.recording_list.sort(this.compare("millisecond")),this.recording_list.length>20&&this.recording_list.splice(20),Object(l["m"])("recording_list",this.recording_list,"arr",!0),Object(d["b"])("/api/v1/app/new_auth/check_auth_",{iccid:t}).then(function(e){s["a"].clear();var t=Object(l["h"])("watchAutoSearch");t&&(t++,Object(l["m"])("watchAutoSearch",t)),1===e.state?(Object(l["m"])("originPrice",e.data.default_price),Object(l["m"])("check_iccid",e.data.iccid),Object(l["m"])("new_auth_search_iccid",e.data.iccid),localStorage.setItem("currentType","card"),1===e.data.status?i.$router.push({path:"/weixin/card/usage"}):2===e.data.status?(Object(l["m"])("check_realNameSource",e.data.source),Object(l["k"])({type:3,iccid:e.data.iccid}),i.$router.push({path:"/weixin/new_card/real_name"})):3===e.data.status&&(Object(l["k"])({type:3,iccid:e.data.iccid}),i.$router.push({path:"/weixin/card/plan_list",query:{type:1}}))):Object(a["a"])({message:e.msg})})},scanIccid:function(){var e=this;"wechat"===this.client_type?this.wx.scanQRCode({needResult:1,scanType:["barCode","qrCode"],success:function(t){var c=t.resultStr;c.indexOf(",")>-1&&(c=c.substr(c.indexOf(",")+1,c.length)),e.iccid=c.replace(/\s*/g,""),e.processCheckIccid(e.iccid)}}):"alipay"===this.client_type&&ap.scan(function(t){var c=t.code;e.iccid=c.replace(/\s*/g,""),e.processCheckIccid(e.iccid)})},inArray:function(e,t,c){return null==t?-1:t.indexOf(e,c)},compare:function(e){return function(t,c){var i=t[e],n=c[e];return n-i}},checkSearchIccid:function(e){var t=e.replace(/\s/g,"");return t?(t.length<19||t.length>20||"89"!==t.substr(0,2))&&11!==t.length&&13!==t.length&&15!==t.length&&16!==t.length?{state:0,msg:"ICCID有误,请检查"}:/^[a-zA-Z0-9]+$/.test(t)?{state:1}:{state:0,msg:"ICCID有误,请检查"}:{state:0,msg:"请输入ICCID"}},deleteIccid:function(e){for(var t=-1,c=0;c<this.recording_list.length;c++)if(this.recording_list[c].iccid===e){t=c;break}t>=0&&(this.recording_list.splice(t,1),Object(l["m"])("recording_list",this.recording_list,"arr",!0)),this.recording_list.length||(this.recording_show=!1)},handleIccidFocus:function(){this.iccid?this.showClearBtn=!0:this.showClearBtn=!1},clearInputIccid:function(){this.iccid="",this.$refs.iccidDom.focus(),this.showClearBtn=!1},iccidBlur:function(){this.showClearBtn=!1},debounce:function(e,t){var c,i=this;return function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];c&&clearTimeout(c),c=setTimeout(function(){e.apply(i,a)},t)}}}},k=O,j=(c("e0b1"),Object(g["a"])(k,i,n,!1,null,null,null));j.options.__file="lookup.vue";t["default"]=j.exports},"75b0":function(e,t,c){},a481:function(e,t,c){c("214f")("replace",2,function(e,t,c){return[function(i,n){"use strict";var a=e(this),r=void 0==i?void 0:i[t];return void 0!==r?r.call(i,a,n):c.call(String(a),i,n)},c]})},aa77:function(e,t,c){var i=c("5ca1"),n=c("be13"),a=c("79e5"),r=c("fdef"),s="["+r+"]",o="​",l=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),u=function(e,t,c){var n={},s=a(function(){return!!r[e]()||o[e]()!=o}),l=n[e]=s?t(h):r[e];c&&(n[c]=l),i(i.P+i.F*s,"String",n)},h=u.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(d,"")),e};e.exports=u},b258:function(e,t,c){},c520:function(e,t,c){},c5f6:function(e,t,c){"use strict";var i=c("7726"),n=c("69a8"),a=c("2d95"),r=c("5dbc"),s=c("6a99"),o=c("79e5"),l=c("9093").f,d=c("11e9").f,u=c("86cc").f,h=c("aa77").trim,f="Number",p=i[f],m=p,b=p.prototype,g=a(c("2aeb")(b))==f,v="trim"in String.prototype,_=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():h(t,3);var c,i,n,a=t.charCodeAt(0);if(43===a||45===a){if(c=t.charCodeAt(2),88===c||120===c)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+t}for(var r,o=t.slice(2),l=0,d=o.length;l<d;l++)if(r=o.charCodeAt(l),r<48||r>n)return NaN;return parseInt(o,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,c=this;return c instanceof p&&(g?o(function(){b.valueOf.call(c)}):a(c)!=f)?r(new m(_(t)),c,p):_(t)};for(var w,O=c("9e1e")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;O.length>k;k++)n(m,w=O[k])&&!n(p,w)&&u(p,w,d(m,w));p.prototype=b,b.constructor=p,c("2aba")(i,f,p)}},d399:function(e,t,c){"use strict";var i=c("1988"),n=c("2b0e"),a=c("d282"),r=c("a142"),s=c("6605"),o=c("ad06"),l=c("543e"),d=Object(a["a"])("toast"),u=d[0],h=d[1],f=u({mixins:[s["a"]],props:{icon:String,className:null,loadingType:String,forbidClick:Boolean,message:[String,Number],type:{type:String,default:"text"},position:{type:String,default:"middle"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},mounted:function(){this.toggleClickable()},destroyed:function(){this.toggleClickable()},watch:{value:function(){this.toggleClickable()},forbidClick:function(){this.toggleClickable()}},methods:{toggleClickable:function(){var e=this.value&&this.forbidClick;if(this.clickable!==e){this.clickable=e;var t=e?"add":"remove";document.body.classList[t]("van-toast--unclickable")}},onAfterEnter:function(){this.$emit("opened"),this.onOpened&&this.onOpened()},onAfterLeave:function(){this.$emit("closed")}},render:function(e){var t=this.type,c=this.icon,i=this.message,n=this.loadingType,a=c||"success"===t||"fail"===t;function s(){return a?e(o["a"],{class:h("icon"),attrs:{name:c||t}}):"loading"===t?e(l["a"],{class:h("loading"),attrs:{color:"white",type:n}}):void 0}function d(){if(Object(r["b"])(i)&&""!==i)return"html"===t?e("div",{class:h("text"),domProps:{innerHTML:i}}):e("div",{class:h("text")},[i])}return e("transition",{attrs:{name:"van-fade"},on:{afterEnter:this.onAfterEnter,afterLeave:this.onAfterLeave}},[e("div",{directives:[{name:"show",value:this.value}],class:[h([this.position,{text:!a&&"loading"!==t}]),this.className]},[s(),d()])])}}),p={icon:"",type:"text",mask:!1,value:!0,message:"",className:"",onClose:null,onOpened:null,duration:3e3,position:"middle",forbidClick:!1,loadingType:void 0,getContainer:"body",overlayStyle:null},m=[],b=!1,g=Object(i["a"])({},p);function v(e){return Object(r["c"])(e)?e:{message:e}}function _(){if(r["d"])return{};if(!m.length||b){var e=new(n["default"].extend(f))({el:document.createElement("div")});m.push(e)}return m[m.length-1]}function w(e){return e=Object(i["a"])({},e),e.overlay=e.mask,delete e.mask,delete e.duration,e}function O(e){void 0===e&&(e={});var t=_();return t.value&&t.updateZIndex(),e=Object(i["a"])({},g,v(e),{clear:function(){t.value=!1,e.onClose&&e.onClose(),b&&!r["d"]&&t.$on("closed",function(){clearTimeout(t.timer),m=m.filter(function(e){return e!==t});var e=t.$el.parentNode;e&&e.removeChild(t.$el),t.$destroy()})}}),Object(i["a"])(t,w(e)),clearTimeout(t.timer),e.duration>0&&(t.timer=setTimeout(function(){t.clear()},e.duration)),t}var k=function(e){return function(t){return O(Object(i["a"])({type:e},v(t)))}};["loading","success","fail"].forEach(function(e){O[e]=k(e)}),O.clear=function(e){m.length&&(e?(m.forEach(function(e){e.clear()}),m=[]):b?m.shift().clear():m[0].clear())},O.setDefaultOptions=function(e){Object(i["a"])(g,e)},O.resetDefaultOptions=function(){g=Object(i["a"])({},p)},O.allowMultiple=function(e){void 0===e&&(e=!0),b=e},O.install=function(){n["default"].use(f)},n["default"].prototype.$toast=O;t["a"]=O},d9ae:function(e,t,c){"use strict";var i=c("dca3"),n=c.n(i);n.a},dca3:function(e,t,c){},e0b1:function(e,t,c){"use strict";var i=c("c520"),n=c.n(i);n.a},e7e5:function(e,t,c){"use strict";c("68ef"),c("4d75"),c("09fe"),c("b258")},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=card_lookup.157a26fc.js.map