{"version":3,"sources":["webpack:///./src/views/mifi/authority/index.vue?fd31","webpack:///src/views/mifi/authority/index.vue","webpack:///./src/views/mifi/authority/index.vue?d231","webpack:///./src/views/mifi/authority/index.vue","webpack:///./src/views/mifi/authority/index.vue?2f4a"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","authorityvue_type_script_lang_js_","name","components","_components","Object","defineProperty","popup","dialog","data","client_type","utilies","load_user_msg","load_user_info","redirect_uri","created","$router","push","path","decryptData","_this","alert","title","message","then","methods","_this2","http","res","error","aliUser","uuid","user_id","openid","headimgurl","avatar","gender","nickname","nick_name","wechatUserData","unionid","login","$emit","from","showAuthorityError","_this3","code","_this4","flag","_flag","mifi_authorityvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/logical_page.f5c2d7b3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"transaction-wrap\"},[_c('div',{staticClass:\"animation-wrap\"},[_c('div',{staticClass:\"loader-wrap\"})])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"transaction-wrap\">\n        <div class=\"animation-wrap\">\n            <div class=\"loader-wrap\"></div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {Dialog, Popup} from 'vant'\n    import {_post} from \"../../../http\";\n    import {getUrlParam, getStorage, setStorage, removeStorage, codeParam, checkBrowser,GetUrlRelativePath} from \"../../../utilies\";\n\n    export default {\n        name: \"index\",\n        components: {\n            [Popup.name]: Popup,\n            [Dialog.name]: Dialog,\n        },\n        data() {\n            return {\n                client_type: checkBrowser(),\n                load_user_msg: false,\n                load_user_info: '正在授权,请等候',\n                redirect_uri: getStorage('authorized_redirect_uri')\n            }\n        },\n        created() {\n\n            if(!getStorage('token')){\n                if (this.client_type === 'wechat' || this.client_type === 'alipay') {\n                    if (getStorage('state') && getUrlParam('state') && getStorage('state') === getUrlParam('state')) {\n                        this.decryptData();\n                    } else {\n                        let _this = this;\n                        removeStorage('token');\n                        removeStorage('state');\n\n                        Dialog.alert({\n                            title: '绑定失败',\n                            message: '您的账号信息绑定失败,请重新授权绑定。',\n                        }).then(() => {\n                            _this.$router.push('/mifi/index');\n                        })\n                    }\n                } else {\n                    this.$router.push('/mifi/card/lookup');\n                }\n\n            }else{\n                this.$router.push({path:'/mifi/card/lookup'});\n            }\n        },\n\n        methods: {\n            decryptData(){\n                _post('/accountCenter/v2/secret/decrypt?' + codeParam({}, 'post'), {\n                    data: getUrlParam('data')\n                }).then(res => {\n                    if (res.error == 0) {\n                        if (this.client_type === 'alipay') {\n                            let aliUser = {\n                                uuid: res.data.data.user_id,\n                                openid: res.data.data.user_id,\n                                headimgurl: res.data.data.avatar,\n                                gender: res.data.data.gender == 'm' ? 1 : 2,\n                                nickname: res.data.data.nick_name\n                            }\n                            setStorage('decrypt_data', aliUser, 'obj');\n                        } else if (this.client_type === 'wechat') {\n\n                            let wechatUserData = res.data.data;\n                            if (wechatUserData.unionid) {\n                                wechatUserData.openid = wechatUserData.unionid\n                            }\n                            setStorage('decrypt_data', wechatUserData, 'obj');\n                        }\n                        //login\n                        this.login(res);\n\n                    } else if (res.error == '11002') {\n\n                        setStorage('refreshUrl',GetUrlRelativePath());\n                        this.$emit(\"getToken\",{from:'mifi'});\n\n                    } else {\n                        this.showAuthorityError('B' + res.error)\n                    }\n                })\n            }, // 解密data\n            login(res){\n                let _this =this;\n\n                _post('/accountCenter/v2/auth/login?' + codeParam({}, 'post'), {\n                    uuid: getStorage('decrypt_data', 'obj').openid,\n                    code: res.data.code\n                }).then(res => {\n\n                    if (res.error == 0) {\n\n                        setStorage('token', res.data);//获取token\n                        getStorage('check_iccid') ? this.$router.push('/mifi/index') : this.$router.push('/mifi/card/lookup');\n\n                    } else if (res.error == '11002') {\n\n                        setStorage('refreshUrl',GetUrlRelativePath());\n                        this.$emit('getToken',{from:'mifi'})\n\n                    } else if (res.error == '30005' || res.error == '11003') {\n\n                        let _this = this;\n\n                        Dialog.alert({\n                            title: '绑定信息',\n                            message: '为了您的账号安全，需要绑定您的手机号码',\n                        }).then(() => {\n                            _this.$router.push({path: '/binding'});\n                        })\n\n                    } else {\n                        this.showAuthorityError('L' + res.error)\n                    }\n                })\n            }, // 登录\n\n            showAuthorityError(flag) {\n                let _this = this;\n                let _flag = flag ? flag : '';\n                Dialog.alert({\n                    title: '账号异常',\n                    message: '您的账户信息存在问题,无法进行操作,请联系我司客服工作人员,我们将尽快为您解决问题' + _flag + '。',\n                }).then(() => {\n                    _this.load_user_msg = true;\n                    _this.load_user_info = '账号异常' + _flag;\n\n                })\n            },// 拦截错误信息\n        }\n    }\n</script>\n\n<style lang=\"less\">\n    .transaction-wrap,.animation-wrap{\n        height: 100%;\n    }\n    .animation-wrap {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: 50px;\n        color: #f8b43e;\n        -webkit-transition: .3s color, .3s border;\n        transition: .3s color, .3s border;\n    }\n    [class*=\"loader-\"] {\n        display: inline-block;\n        width: 1em;\n        height: 1em;\n        color: inherit;\n        vertical-align: middle;\n        pointer-events: none;\n    }\n    .loader-wrap {\n        border-radius: 50%;\n        box-shadow: 0 1em 0 -.2em currentcolor;\n        position: relative;\n        -webkit-animation: loader-wrap 0.8s ease-in-out alternate infinite;\n        animation: loader-wrap 0.8s ease-in-out alternate infinite;\n        -webkit-animation-delay: 0.32s;\n        animation-delay: 0.32s;\n        top: -1em;\n    }\n    .loader-wrap:after,\n    .loader-wrap:before {\n        content: '';\n        position: absolute;\n        width: inherit;\n        height: inherit;\n        border-radius: inherit;\n        box-shadow: inherit;\n        -webkit-animation: inherit;\n        animation: inherit;\n    }\n    .loader-wrap:before {\n        left: -1em;\n        -webkit-animation-delay: 0.48s;\n        animation-delay: 0.48s;\n    }\n    .loader-wrap:after {\n        right: -1em;\n        -webkit-animation-delay: 0.16s;\n        animation-delay: 0.16s;\n    }\n    @-webkit-keyframes loader-wrap {\n        0% {\n            box-shadow: 0 2em 0 -.2em currentcolor;\n        }\n        100% {\n            box-shadow: 0 1em 0 -.2em currentcolor;\n        }\n    }\n    @keyframes loader-wrap {\n        0% {\n            box-shadow: 0 2em 0 -.2em currentcolor;\n        }\n        100% {\n            box-shadow: 0 1em 0 -.2em currentcolor;\n        }\n    }\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3231f5c4&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}