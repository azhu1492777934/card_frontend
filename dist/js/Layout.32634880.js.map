{"version":3,"sources":["webpack:///./src/components/layout.vue?4cc7","webpack:///src/components/layout.vue","webpack:///./src/components/layout.vue?903d","webpack:///./src/components/layout.vue","webpack:///./src/components/layout.vue?f6a1","webpack:///./src/components/common/uesrHead.vue?ad69","webpack:///./src/components/common/uesrHead.vue?1131","webpack:///src/components/common/uesrHead.vue","webpack:///./src/components/common/uesrHead.vue?e53d","webpack:///./src/components/common/uesrHead.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","userInfoData","authorizeUserInfo","on","getUserData","getUserInfo","close-on-click-overlay","model","callback","$$v","load_user_msg","type","size","color","staticRenderFns","layoutvue_type_script_lang_js_","data","client_type","Object","utilies","state","appContext","load_user_info","components","_components","userHeader","uesrHead","defineProperty","dialog","notify","popup","loading","computed","objectSpread","vuex_esm","isShowUser","userInfo","showUser","userInfoInner","created","watch_iccid","_this","UA","navigator","userAgent","toLowerCase","test","showHtmlcallJava2","window","webkit","messageHandlers","getIosToken","postMessage","setTimeout","authorized","methods","str3","jsInterface","GetToken","localStorage","setItem","plusReady","plus","storage","getItem","$store","commit","userDom","document","querySelector","offsetHeight","global_variables","packed_project","version","alert","title","message","then","authorizedRediect","GetUrlRelativePath","url","location","toString","arrUrl","split","start","indexOf","relUrl","substring","_this2","http","res","error","JSON","stringify","UserInfo","account","avatar","nickname","showConfirmButton","$emit","curTimeStamp","Date","parse","timeSpan","extra","status","showAuthorityError","showDoc","_this3","Math","random","substr","getTime","redirect_uri","authorized_redirect_url","scope","href","flag","_flag","components_layoutvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_layout_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_layout_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_uesrHead_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_uesrHead_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","src","_v","_s","click","$event","rmb","elb","uesrHeadvue_type_script_lang_js_","props","msg","common_uesrHeadvue_type_script_lang_js_"],"mappings":"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","file":"js/Layout.32634880.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"inner-wrap\"},[_c('user-header',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowUser),expression:\"isShowUser\"}],attrs:{\"userInfoData\":_vm.authorizeUserInfo}}),_c('router-view',{on:{\"getUserData\":_vm.getUserInfo}}),_c('van-popup',{attrs:{\"close-on-click-overlay\":false},model:{value:(_vm.load_user_msg),callback:function ($$v) {_vm.load_user_msg=$$v},expression:\"load_user_msg\"}},[_c('van-loading',{attrs:{\"type\":\"spinner\",\"size\":\"30\",\"color\":\"#fff\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"inner-wrap\">\n    <user-header v-show=\"isShowUser\" :userInfoData=\"authorizeUserInfo\"></user-header>\n    <router-view @getUserData=\"getUserInfo\"/>\n    <van-popup :close-on-click-overlay=\"false\" v-model=\"load_user_msg\">\n      <van-loading type=\"spinner\" size=\"30\" color=\"#fff\"/>\n    </van-popup>\n  </div>\n</template>\n\n<script>\n\n  import {Notify} from 'vant'\n  import {mapState} from 'vuex'\n  import userHeader from './common/uesrHead'\n  import {Dialog, Popup, Loading} from 'vant'\n  import {_post, _get} from \"../http\";\n  import {\n    codeParam,\n    checkBrowser,\n    setStorage,\n    getStorage,\n    removeStorage,\n    getUrlParam,\n    checkICCID,\n    getCardServerToken\n  } from \"../utilies\";\n\n  export default {\n    name: 'App',\n    data() {\n      return {\n        client_type: checkBrowser(),//微信/支付宝环境\n        state: '',//防跨域攻击\n        appContext: false,//是否app环境\n        load_user_msg: false,\n        load_user_info: '加载用户信息,请等候',\n      }\n    },\n    components: {\n      userHeader,\n      [Dialog.name]: Dialog,\n      [Notify.name]: Notify,\n      [Popup.name]: Popup,\n      [Loading.name]: Loading\n    },\n    computed: {\n      ...mapState({\n        isShowUser: state => state.userInfo.showUser,\n        authorizeUserInfo: state => state.userInfo.userInfoInner\n      }),\n    },\n    created() {\n      // 时间差\n      setStorage('timeSpan', 0);\n\n      //手表扫码跳转\n      if (getUrlParam('iccid')) {\n        let watch_iccid = getUrlParam('iccid');\n        if (checkICCID(watch_iccid).state === 1) {\n          setStorage('watch_card', watch_iccid);\n          setStorage('watchAutoSearch', 1);\n        }\n      } else {\n        removeStorage('watch_card');\n        removeStorage('watchAutoSearch');\n      }\n      let _this = this;\n      if (this.client_type === 'app') {\n        let UA = navigator.userAgent.toLowerCase();\n        if (/(ylkids_android)/.test(UA)) {\n          this.showHtmlcallJava2();\n        } else if (/(ios1.1.0)/.test(UA)) {\n          let str = window.webkit.messageHandlers.getIosToken.postMessage(null);\n          setTimeout(function () {\n            _this.authorized();\n          }, 500)\n        }\n      } else {\n        this.authorized();\n      }\n    },\n    methods: {\n      showHtmlcallJava2() {\n        let str3 = window.jsInterface.GetToken();\n        localStorage.setItem(\"token\", str3);\n        this.authorized();\n      },\n      plusReady() {\n        localStorage.setItem(\"token\", plus.storage.getItem(\"appToken\"));\n        this.authorized()\n      },\n      authorized() {\n        if ((this.client_type === 'wechat' || this.client_type === 'alipay' || this.client_type === 'app') && process.env.NODE_ENV !== 'development') {\n          if (this.client_type !== 'app') {\n            if (getStorage('userInfo', 'obj')) {\n              this.$store.commit('userInfo/changeUserStatus', true);\n              let userDom = document.querySelector('.user-wrap');\n              if (userDom) setStorage('userHeight', userDom.offsetHeight);\n\n              if (this.global_variables.packed_project === 'mifi') {\n                this.$store.commit('userInfo/changeUserStatus', false);\n              }\n            }\n\n            if ((this.client_type === 'wechat' && getStorage('wechat_version') !== this.global_variables.version) ||\n              (this.client_type === 'alipay' && getStorage('alipay_version') !== this.global_variables.version)\n            ) {\n              removeStorage('token');\n              removeStorage('state');\n            }\n\n          }//app环境隐藏顶部个人信息\n          if (getStorage('token')) {\n            if (this.global_variables.packed_project !== 'mifi') {\n              this.getUserInfo();//获取用户信息 其他项目的跳转\n            }\n          } else {\n            let _this = this;\n            Dialog.alert({\n              title: '授权',\n              message: '为了您的账号安全，我们需要您对本站进行授权操作并绑定账号。'\n            }).then(() => {\n              _this.authorizedRediect()\n            })\n          }\n        } else {\n          this.$store.commit('userInfo/changeUserStatus', false);\n        }\n      },\n\n      GetUrlRelativePath() {\n        let url = document.location.toString(),\n          arrUrl = url.split(\"//\"),\n          start = arrUrl[1].indexOf(\"/\"),\n          relUrl = arrUrl[1].substring(start);//stop省略，截取从start开始到结尾的所有字符\n        if (relUrl.indexOf(\"?\") !== -1) {\n          relUrl = relUrl.split(\"?\")[0];\n        }\n        return relUrl;\n      },\n      getUserInfo() {\n        //获取用户信息\n        this.load_user_msg = true;//用户信息遮罩\n        _get(\"/accountCenter/v2/user/info?\" + codeParam({}, 'get'))\n          .then(res => {\n            this.load_user_msg = false;\n            if (res.error === 0) {\n              if (res.data && JSON.stringify(res.data) !== '{}') {\n                let UserInfo = {\n                  account: res.data.account,\n                  avatar: res.data.avatar,\n                  nickname: res.data.nickname,\n                };\n                setStorage('userInfo', UserInfo, 'obj');\n                if (this.client_type === 'wechat' || this.client_type === 'alipay') {\n                  this.$store.commit('userInfo/changeUserStatus', true);\n                  this.$store.commit('userInfo/changeUserInfo', UserInfo);\n\n                  let userDom = document.querySelector('.user-wrap');\n                  if (userDom) setStorage('userHeight', userDom.offsetHeight);\n\n                  if (this.global_variables.packed_project === 'mifi') {\n                    this.$store.commit('userInfo/changeUserStatus', false);\n                  }\n                } else if (this.client_type === 'app') {\n                  this.$store.commit('userInfo/changeUserInfo', UserInfo);\n                }\n              } else {\n                let _this = this;\n                Dialog.alert({\n                  title: '账号异常',\n                  message: '您的账户信息存在问题,无法进行操作,请联系我司客服工作人员,我们将尽快为您解决问题。',\n                  showConfirmButton: false,\n                }).then(() => {\n                  _this.load_user_msg = true;\n                  _this.load_user_info = '账号异常';\n                })\n              }\n            } else if (res.error === 11002) {\n              this.$emit('getToken');\n            } else if (res.error === 10007) {\n              let curTimeStamp = (Date.parse(new Date()) / 1000),\n                timeSpan = res.extra - curTimeStamp;\n              setStorage('timeSpan', timeSpan);\n              this.getUserInfo();\n            } else if (res.error === 20014) {\n              Notify({message: '请求超时'});\n            } else {\n              (res.status || res.error) ? this.showAuthorityError('A' + res.error) : this.showAuthorityError('A-R' + JSON.stringify(res))\n            }\n          })\n      },// 获取用户信息\n      showDoc() {\n        Dialog.alert({\n          message: '钻石：翼联会员体系下通用虚拟货币,可以用于:购买套餐,充值话费,游戏娱乐,购买优惠商品;\\nELB：可通过阅读微信文章、充值话费和活动套餐等方式免费领取，用于商品现金抵扣、游戏娱乐等'\n        })\n      },\n      authorizedRediect() {\n        let _this = this;\n        this.state = Math.random().toString(36).substr(2) + new Date().getTime();\n        setStorage('state', this.state);\n\n        //获取当前重定向地址\n        let redirect_uri = this.GetUrlRelativePath();\n        setStorage('authorized_redirect_uri', redirect_uri);\n\n        //存储手表二维码ICCID\n        if (getUrlParam('iccid')) {\n          let watch_iccid = getUrlParam('iccid');\n          if (checkICCID(watch_iccid).state === 1) {\n            setStorage('watch_card', watch_iccid)\n            setStorage('watchAutoSearch', 1);\n          }\n        } else {\n          removeStorage('watch_card');\n          removeStorage('watchAutoSearch');\n        }\n        // 授权\n        _get('/accountCenter/v2/oauth/authorize?' + codeParam({\n          client_type: this.client_type,\n          redirect_uri: this.global_variables.authorized_redirect_url + '/authority',\n          scope: 'userinfo',\n          state: this.state\n        }, 'get'))\n          .then(res => {\n            if (res.error === 0) {\n              if (this.client_type === 'wechat') {\n                setStorage('wechat_version', this.global_variables.version);\n              } else if (this.client_type === 'alipay') {\n                setStorage('alipay_version', this.global_variables.version);\n              }\n              location.href = res.data;\n            } else if (res.error === 11002) {\n              this.$emit('getToken')\n            } else {\n              this.this.showAuthorityError('C' + res.error)\n            }\n          })\n      },//授权操作\n      showAuthorityError(flag) {\n        let _this = this;\n        let _flag = flag ? flag : '';\n        Dialog.alert({\n          title: '账号异常',\n          showConfirmButton: false,\n          message: '您的账户信息存在问题,无法进行操作,请联系我司客服工作人员,我们将尽快为您解决问题' + _flag + '。',\n        }).then(() => {\n          _this.load_user_msg = true;\n          _this.load_user_info = '账号异常' + _flag;\n        })\n      }\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  .van-popup {\n    .van-loading {\n      margin: 0 auto;\n    }\n  }\n</style>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./layout.vue?vue&type=template&id=b6871b24&\"\nimport script from \"./layout.vue?vue&type=script&lang=js&\"\nexport * from \"./layout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./layout.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"layout.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layout.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layout.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uesrHead.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uesrHead.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-wrap\"},[_c('div',{staticClass:\"user-inner-wrap\"},[_c('div',{staticClass:\"user-name-wrap\"},[_c('img',{attrs:{\"src\":_vm.getUserInfo.avatar}}),_c('span',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm.getUserInfo.nickname))])]),_c('div',[_c('span',[_vm._v(\"钻石:\")]),_c('span',{staticClass:\"icon-diamond-wrap\",on:{\"click\":function($event){_vm.showDoc(0)}}},[_c('i',{staticClass:\"icon-user-size  icon-diamond\"}),_vm._v(\"\\n                      \"+_vm._s(_vm.getUserInfo.account.rmb)+\"\\n                  \")]),_c('span',[_vm._v(\"ELB:\")]),_c('span',{staticClass:\"icon-elb-wrap\",on:{\"click\":function($event){_vm.showDoc(1)}}},[_c('i',{staticClass:\"icon-user-size icon-elb\"}),_vm._v(\"\\n                      \"+_vm._s(_vm.getUserInfo.account.elb)+\"\\n                  \")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"user-wrap\">\n        <div class=\"user-inner-wrap\">\n            <div class=\"user-name-wrap\">\n                <img :src=\"getUserInfo.avatar\">\n                <span class=\"user-name\">{{getUserInfo.nickname}}</span>\n            </div>\n            <div>\n                <span>钻石:</span>\n                <span class=\"icon-diamond-wrap\" @click=\"showDoc(0)\">\n                          <i class=\"icon-user-size  icon-diamond\"></i>\n                          {{getUserInfo.account.rmb}}\n                      </span>\n                <span>ELB:</span>\n\n                <span class=\"icon-elb-wrap\" @click=\"showDoc(1)\">\n                          <i class=\"icon-user-size icon-elb\"></i>\n                          {{getUserInfo.account.elb}}\n                      </span>\n                <!-- <span @click=\"showDoc\" class=\"tip-wrap\">!</span> -->\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {mapState} from 'vuex'\n    import {Dialog} from 'vant'\n    export default {\n        name: \"uesrHead\",\n        props:{\n            userInfoData:{\n                type:Object\n            },\n        },\n        computed: {\n            ...mapState({\n                getUserInfo: state => state.userInfo.userInfoInner\n            }),\n        },\n        components: {\n            [Dialog.name]: Dialog\n        },\n        methods:{\n            showDoc(type) {\n                let msg;\n                 if(type==0){\n                    msg=\"钻石：翼联会员体系下通用虚拟货币,可以用于:购买套餐,充值话费,游戏娱乐,购买优惠商品;\"\n                 }else{\n                    msg=\"ELB：可通过阅读微信文章、充值话费和活动套餐等方式免费领取，用于商品现金抵扣、游戏娱乐等;\"\n\n                 }   \n                Dialog.alert({\n                    message: msg\n                })\n            },\n        }\n    }\n</script>\n\n<style lang=\"less\">\n    .user-wrap {\n        padding: 15px;\n        background-color: #fff;\n        .user-inner-wrap {\n            display: flex;\n            align-items: center;\n            text-align: left;\n            > div {\n                &:first-child {\n                    flex: 2;\n                }\n                &:last-child {\n                    flex: 5;\n                }\n            }\n        }\n        span {\n            vertical-align: middle;\n        }\n        .user-name-wrap {\n            img {\n                display: inline-block;\n                width: 58px;\n                height: 58px;\n                background-color: #f0f0f0;\n                vertical-align: middle;\n            }\n            .user-name {\n                display: inline-block;\n                max-width: 130px;\n                font-size: 22px;\n                padding-left: 10px;\n                overflow: hidden;\n                white-space: nowrap;\n                text-overflow: ellipsis;\n            }\n        }\n\n        .icon-user-size {\n            position: absolute;\n            left: -20px;\n            top: 50%;\n            margin-top: -20px;\n            display: inline-block;\n            width: 40px;\n            height: 40px;\n            background-size: 100% 100%;\n        }\n        .icon-diamond-wrap,\n        .icon-elb-wrap {\n            position: relative;\n            display: inline-block;\n            margin-right: 20px;\n            padding: 5px;\n            width: 130px;\n            text-align: center;\n            border: 2px solid #3BB2E6;\n            border-radius: 4px;\n        }\n        .icon-diamond-wrap{\n            margin-left:20px;\n        }\n        .icon-elb-wrap {\n            margin-left: 20px;\n        }\n\n        .tip-wrap {\n            display: inline-block;\n            width: 40px;\n            height: 40px;\n            line-height: 40px;\n            border-radius: 50%;\n            background-color: #3BB2E6;\n            color: #fff;\n            text-align: center;\n        }\n        .icon-diamond {\n            background-image: url(\"../../assets/imgs/app/icon-diamonds.png\");\n        }\n        .icon-elb {\n            background-image: url(\"../../assets/imgs/app/icon-elb.png\");\n        }\n    }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uesrHead.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uesrHead.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./uesrHead.vue?vue&type=template&id=3a3a8f4e&\"\nimport script from \"./uesrHead.vue?vue&type=script&lang=js&\"\nexport * from \"./uesrHead.vue?vue&type=script&lang=js&\"\nimport style0 from \"./uesrHead.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"uesrHead.vue\"\nexport default component.exports"],"sourceRoot":""}