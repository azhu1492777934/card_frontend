{"version":3,"sources":["webpack:///./src/views/login/index.vue?79c7","webpack:///./src/views/login/index.vue?d26b","webpack:///src/views/login/index.vue","webpack:///./src/views/login/index.vue?5b56","webpack:///./src/views/login/index.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","type","placeholder","maxlength","domProps","on","input","$event","target","composing","phone","code","disabled","btnCode_disabled","click","getCode","_v","_s","codeText","loginDisabled","login","close-on-click-overlay","model","callback","$$v","isLoginError","loginErrorMsg","staticRenderFns","loginvue_type_script_lang_js_","data","decrypt_data","countdown","state","client_type","time","components","_components","Object","defineProperty","notify","popup","created","utilies","methods","_this2","test","http","mobile","from","uuid","openid","nickname","gender","sex","avatar","headimgurl","then","res","error","_this","message","background","setTimeout","localStorage","getItem","$router","push","path","$emit","location","href","redirect_uri","msg","_this3","pre_three_num","substr","watch_card","includes","countDownFun","_this4","clearInterval","timer","setInterval","views_loginvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/login.e2e49609.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-wrap\"},[_c('div',{staticClass:\"info-wrap\"},[_c('div',{staticClass:\"phone-wrap\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.phone),expression:\"phone\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入手机号码\",\"maxlength\":\"11\"},domProps:{\"value\":(_vm.phone)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.phone=$event.target.value}}})]),_c('div',{staticClass:\"code-wrap\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.code),expression:\"code\"}],attrs:{\"type\":\"number\",\"placeholder\":\"请输入验证码\",\"maxlength\":\"10\"},domProps:{\"value\":(_vm.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.code=$event.target.value}}}),_c('button',{staticClass:\"getCode\",attrs:{\"disabled\":_vm.btnCode_disabled},on:{\"click\":_vm.getCode}},[_vm._v(_vm._s(_vm.codeText))])]),_c('div',{staticClass:\"btn-login-wrap\"},[_c('button',{attrs:{\"disabled\":_vm.loginDisabled},on:{\"click\":_vm.login}},[_vm._v(\"绑定账户\")])])]),_c('van-popup',{attrs:{\"close-on-click-overlay\":true},model:{value:(_vm.isLoginError),callback:function ($$v) {_vm.isLoginError=$$v},expression:\"isLoginError\"}},[_c('p',{staticClass:\"showTip\"},[_vm._v(_vm._s(_vm.loginErrorMsg))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login-wrap\">\n    <div class=\"info-wrap\">\n      <div class=\"phone-wrap\">\n        <input type=\"text\" placeholder=\"请输入手机号码\" maxlength=\"11\" v-model=\"phone\"/>\n      </div>\n      <div class=\"code-wrap\">\n        <input type=\"number\" placeholder=\"请输入验证码\" maxlength=\"10\" v-model=\"code\"/>\n        <button :disabled=\"btnCode_disabled\" class=\"getCode\" @click=\"getCode\">{{codeText}}</button>\n      </div>\n      <div class=\"btn-login-wrap\">\n        <button :disabled=\"loginDisabled\" @click=\"login\">绑定账户</button>\n      </div>\n    </div>\n    <van-popup :close-on-click-overlay=\"true\" v-model=\"isLoginError\">\n      <p class=\"showTip\">{{loginErrorMsg}}</p>\n    </van-popup>\n  </div>\n</template>\n\n<script>\n  import {Notify, Popup} from 'vant'\n  import {_post, _get} from \"../../http\";\n  import {getStorage, lossRate, setStorage, codeParam, checkBrowser} from \"../../utilies\";\n\n  export default {\n    data() {\n      return {\n        decrypt_data: {},//用户数据\n        phone: \"\",\n        code: \"\",\n        codeText: \"获取验证码\",\n        countdown: 60,\n        state: '',\n        client_type: '',\n        btnCode_disabled: false,\n        time: null,\n        loginDisabled: false,\n        isLoginError: false, // 当前用户是否会绑定用户失败\n        loginErrorMsg: '', // 绑定失败信息\n      }\n    },\n    components: {\n      [Notify.name]: Notify,\n      [Popup.name]: Popup\n    },\n    created() {\n      if (checkBrowser() === 'wechat') {\n        this.client_type = 'wechat';\n      } else if (checkBrowser() === 'alipay') {\n        this.client_type = 'alipay';\n      }\n      if(checkBrowser() === 'wechat' || checkBrowser() === 'alipay'){\n        lossRate({\n          type:0\n        })\n      }\n      //获取用户信息\n      this.decrypt_data = getStorage('decrypt_data', 'obj');\n    },\n    methods: {\n      login() {\n        if (!this.phone && !this.code ) {\n          Notify({message: '请填写您的信息'});\n          return;\n        } else if (!(/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\\d{8}$/).test(this.phone)) {\n          Notify({message: '您的手机号码有误'});\n          return;\n        } else {\n          this.loginDisabled = true;\n          lossRate({\n            type: 1,\n            phone: this.phone\n          });\n\n          _post(\"/accountCenter/v2/user/bind?\" + codeParam({}, 'post'), {\n            mobile: this.phone,\n            code: this.code,\n            from: this.client_type,\n            uuid: this.decrypt_data.openid,\n            nickname: this.decrypt_data.nickname,\n            gender: this.decrypt_data.sex,\n            avatar: this.decrypt_data.headimgurl\n          }).then((res) => {\n            this.loginDisabled = false;\n            if (res.error === 0) {\n              let _this = this;\n              setStorage(\"token\", res.data);\n\n              Notify({\n                message: '账户绑定成功',\n                background: '#60ce53'\n              });\n              setTimeout(function () {\n                if (localStorage.getItem(\"currentType\") === \"esim\") {\n                  _this.$router.push({path: '/weixin/card/esim_usage'});\n                } else if (localStorage.getItem(\"currentType\") === \"userCenter\") {\n                  _this.$router.push({path: '/weixin/userCenter/index'});\n                } else {\n                  _this.$router.push({path: '/weixin/card/lookup'})\n                }\n              }, 2000)\n            } else if (res.error === 11002) {\n              this.$emit(\"getToken\");\n            } else if (res.error === 30002) {\n              Notify({\n                message: '帐户绑定成功',\n                background: '#60ce53'\n              });\n\n              if (localStorage.getItem(\"currentType\") === \"esim\") {\n                location.href = '/weixin/card/esim_usage';\n              } else if (localStorage.getItem(\"currentType\") === \"userCenter\") {\n                location.href = \"/weixin/userCenter/index\"\n              } else {\n                let redirect_uri = getStorage('authorized_redirect_uri');\n                getStorage('check_iccid') ? location.href = redirect_uri : location.href = '/weixin/card/lookup';\n              }\n\n            } else if (res.error === 20014) {\n              this.code = '';\n              Notify({message: '用户绑定超时，请重新绑定'});\n            } else {\n              this.isLoginError = true;\n              res.msg ? this.loginErrorMsg = res.msg : this.loginErrorMsg = '绑定用户失败，请反馈我司客服。'\n            }\n          })\n        }\n      },\n      getCode() {\n        if (!this.phone) {\n          Notify({message: '请输入您的手机号码'})\n          return\n        } else if (!(/^(13[0-9]|14[5679]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\\d{8}$/).test(this.phone)) {\n          Notify({message: '请填写正确的手机号码'})\n          return\n        } else {\n          let pre_three_num = this.phone.substr(0, 3),\n            watch_card = ['145', '146', '166', '177', '199'];\n          if (watch_card.includes(pre_three_num)) {\n            Notify({message: '不支持以145,146,166,177,199开头的手机号码'});\n            return\n          } else {\n            Notify({message: '温馨提示：请使用本人手机号绑定账号。'});\n          }\n          this.countDownFun();\n          _post(\"/accountCenter/v2/verify/send?\" + codeParam({}, 'post'), {\n            mobile: this.phone\n          }).then((res) => {\n            if (res.error === 0) {\n              Notify({\n                message: '验证码发送成功',\n                background: '#60ce53'\n              })\n            } else if (res.error === 11002) {\n              this.$emit(\"getToken\");\n            } else {\n              Notify({message: res.msg})\n            }\n          })\n        }\n      },\n      countDownFun() {\n        let _this = this;\n        this.btnCode_disabled = true;\n\n        clearInterval(this.timer);\n\n        this.timer = setInterval(() => {\n          if (_this.countdown <= 0) {\n            _this.codeText = '获取验证码';\n            _this.countdown = 60;\n            _this.btnCode_disabled = false;\n            clearInterval(_this.timer);\n          } else {\n            _this.codeText = this.countdown + 's';\n            _this.countdown--;\n          }\n        }, 1000)\n      }\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  @import \"../../assets/less/utitlies\";\n\n  html, body, #app, .login-wrap {\n    height: 100%\n  }\n\n  .login-wrap {\n    display: flex;\n    align-items: center;\n    width: 100%;\n    .bg-image('../../assets/imgs/login/login_bg');\n    background-position: center center;\n    background-size: cover;\n    .info-wrap {\n      width: 70%;\n      margin: 0 auto;\n      text-align: left;\n      .phone-wrap, .code-wrap {\n        margin-bottom: 40px;\n        background: rgba(255, 255, 255, 0.7);\n        border-radius: 7px;\n        box-shadow: 0 18px 9px 0 rgba(5, 87, 197, 0.18);\n        input {\n          display: inline-block;\n          padding: 20px 0 20px 15px;\n          font-size: 30px;\n          color: #000;\n        }\n      }\n      .code-wrap {\n        align-items: center;\n        input {\n          display: inline-block;\n          width: 59%;\n        }\n        button {\n          display: inline-block;\n          width: 180px;\n          padding: 15px 0;\n          border-radius: 6px;\n          color: #23B0FE;\n          line-height: 1;\n          background-color: #fff;\n          box-sizing: border-box;\n        }\n      }\n\n      .btn-login-wrap {\n        button {\n          display: inline-block;\n          width: 100%;\n          padding: 20px;\n          background: #fff;\n          color: #23B0FE;\n          font-size: 34px;\n          box-shadow: -1px 14px 9px 0px rgba(5, 87, 197, 0.18);\n          border-radius: 10px;\n          line-height: 1;\n        }\n      }\n    }\n  }\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=abe7ca86&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports"],"sourceRoot":""}