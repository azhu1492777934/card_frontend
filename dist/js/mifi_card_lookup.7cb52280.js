(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mifi_card_lookup"],{"207a":function(t,e,r){},"24b9":function(t,e,r){t.exports=r.p+"img/scanTop.5a342865.png"},3040:function(t,e,r){"use strict";function i(t){return function(){var e=this,r=arguments;return new Promise(function(i,c){var n=t.apply(e,r);function a(t,e){try{var r=n[t](e),a=r.value}catch(t){return void c(t)}r.done?i(a):Promise.resolve(a).then(o,s)}function o(t){a("next",t)}function s(t){a("throw",t)}o()})}}r.d(e,"a",function(){return i})},"4e3c":function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"btn-wrap"},[r("button",{class:{disabled:t.btnState},attrs:{disabled:t.btnState},on:{click:t.clickThrotle}},[t._v("\n    "+t._s(t.btnText)+"\n    ")])])},c=[],n={name:"btn-common",props:{btnText:{type:String}},data:function(){return{btnState:!1,timer:null}},created:function(){},methods:{clickThrotle:function(){var t=this;this.$emit("clickThrotle"),this.btnState=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){t.btnState=!1},2e3)}}},a=n,o=(r("d9ae"),r("2877")),s=Object(o["a"])(a,i,c,!1,null,null,null);s.options.__file="index.vue";e["a"]=s.exports},"72e8":function(t,e,r){"use strict";var i=r("207a"),c=r.n(i);c.a},"96cf":function(t,e){!function(e){"use strict";var r,i=Object.prototype,c=i.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag",h="object"===typeof t,u=e.regeneratorRuntime;if(u)h&&(t.exports=u);else{u=e.regeneratorRuntime=h?t.exports:{},u.wrap=y;var l="suspendedStart",d="suspendedYield",f="executing",p="completed",m={},g={};g[a]=function(){return this};var v=Object.getPrototypeOf,w=v&&v(v($([])));w&&w!==i&&c.call(w,a)&&(g=w);var _=x.prototype=j.prototype=Object.create(g);O.prototype=_.constructor=x,x.constructor=O,x[s]=O.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===O||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(_),t},u.awrap=function(t){return{__await:t}},k(C.prototype),C.prototype[o]=function(){return this},u.AsyncIterator=C,u.async=function(t,e,r,i){var c=new C(y(t,e,r,i));return u.isGeneratorFunction(e)?c:c.next().then(function(t){return t.done?t.value:c.next()})},k(_),_[s]="Generator",_[a]=function(){return this},_.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var i=e.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},u.values=$,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,c){return o.type="throw",o.arg=t,e.next=i,c&&(e.method="next",e.arg=r),!!c}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=c.call(a,"catchLoc"),h=c.call(a,"finallyLoc");if(s&&h){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&c.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var a=n?n.completion:{};return a.type=t,a.arg=e,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var c=i.arg;L(r)}return c}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:$(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=r),m}}}function y(t,e,r,i){var c=e&&e.prototype instanceof j?e:j,n=Object.create(c.prototype),a=new E(i||[]);return n._invoke=I(t,r,a),n}function b(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function j(){}function O(){}function x(){}function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function C(t){function e(r,i,n,a){var o=b(t[r],t,i);if("throw"!==o.type){var s=o.arg,h=s.value;return h&&"object"===typeof h&&c.call(h,"__await")?Promise.resolve(h.__await).then(function(t){e("next",t,n,a)},function(t){e("throw",t,n,a)}):Promise.resolve(h).then(function(t){s.value=t,n(s)},a)}a(o.arg)}var r;function i(t,i){function c(){return new Promise(function(r,c){e(t,i,r,c)})}return r=r?r.then(c,c):c()}this._invoke=i}function I(t,e,r){var i=l;return function(c,n){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===c)throw n;return N()}r.method=c,r.arg=n;while(1){var a=r.delegate;if(a){var o=T(a,r);if(o){if(o===m)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===l)throw i=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var s=b(t,e,r);if("normal"===s.type){if(i=r.done?p:d,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=p,r.method="throw",r.arg=s.arg)}}}function T(t,e){var i=t.iterator[e.method];if(i===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,T(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var c=b(i,t.iterator,e.arg);if("throw"===c.type)return e.method="throw",e.arg=c.arg,e.delegate=null,m;var n=c.arg;return n?n.done?(e[t.resultName]=n.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,m):n:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function $(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){while(++i<t.length)if(c.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=r,e.done=!0,e};return n.next=n}}return{next:N}}function N(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},a481:function(t,e,r){r("214f")("replace",2,function(t,e,r){return[function(i,c){"use strict";var n=t(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,n,c):r.call(String(n),i,c)},r]})},cd1e:function(t,e,r){"use strict";r.r(e);var i,c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"check-card-wrap"},[i("div",{ref:"ref_top",staticClass:"scanTop-wrap"},[i("img",{attrs:{src:r("24b9"),alt:""}})]),i("div",{ref:"ref_search",staticClass:"search-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.iccid,expression:"iccid"}],ref:"iccidDom",attrs:{placeholder:"扫码或手动输入iccid号或11位电话号",type:"text"},domProps:{value:t.iccid},on:{focus:t.handleIccidFocus,blur:function(e){return e.preventDefault(),t.iccidBlur(e)},input:function(e){e.target.composing||(t.iccid=e.target.value)}}}),i("span",{directives:[{name:"show",rawName:"v-show",value:t.showClearBtn,expression:"showClearBtn"}],staticClass:"clearIccid",on:{click:t.clearInputIccid}},[t._v("×")]),i("span",{staticClass:"iconfont icon-scan bounceIn animated",on:{click:t.testClick}})]),i("div",{ref:"ref_button",staticClass:"btn-check-wrap"},[i("card-button",{attrs:{btnText:"查询"},on:{clickThrotle:function(e){t.searchIccid(t.iccid)}}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.recording_show,expression:"recording_show"}],staticClass:"recording-wrap"},[i("p",{ref:"recording_title",staticClass:"recording-title"},[i("span",[t._v("历史搜索记录")]),i("span",[t._v(t._s(t.recording_list.length)+"条")])]),i("ul",{ref:"main_recording",staticClass:"recording-list-wrap"},t._l(t.recording_list,function(e,r){return i("li",[i("span",{on:{click:function(r){t.searchIccid(e.iccid)}}},[t._v(t._s(e.iccid))]),i("span",[t._v(t._s(e.searchTime))]),i("span",{on:{click:function(r){t.deleteIccid(e.iccid)}}},[t._v("×")])])}))])])},n=[],a=(r("55dd"),r("6762"),r("96cf"),r("3040")),o=(r("a481"),r("9a83"),r("f564")),s=r("a322"),h=(r("7f7f"),r("8a58"),r("e41f")),u=r("35df"),l=r("db04"),d=r("4e3c"),f={name:"home",data:function(){return{sort_recording_list:{},recording_list:[],recording_show:!1,iccid:"",client_type:Object(u["d"])(),showClearBtn:!1}},components:(i={},Object(s["a"])(i,h["a"].name,h["a"]),Object(s["a"])(i,"cardButton",d["a"]),i),created:function(){var t=this;this.$store.commit("mifiCommon/changeErrStatus",{show:!1});var e=this;if(Object(u["j"])("recording_list","arr")){var r=Object(u["j"])("recording_list","arr");r.length&&(this.recording_list=r,this.recording_show=!0)}Object(u["j"])("new_auth_search_iccid")?this.iccid=Object(u["j"])("new_auth_search_iccid"):Object(u["j"])("check_iccid")&&(this.iccid=Object(u["j"])("check_iccid")),this.$watch("iccid",this.debounce(function(t){e.handleIccidFocus()},500));var i=Object(u["k"])("iccid")||Object(u["j"])("watch_card");if(i&&1===this.checkSearchIccid(i).state)if(Object(u["j"])("watchAutoSearch")>2&&(Object(u["o"])("watch_card"),Object(u["o"])("watchAutoSearch")),Object(u["j"])("watch_card_timestamp")){var c=Object(u["j"])("watch_card_timestamp"),n=(new Date).getTime();if(n>c){var a=(new Date).getTime()+6e4;Object(u["p"])("check_iccid",i),Object(u["p"])("watch_card_timestamp",a),this.processCheckIccid(i)}}else{this.iccid=i,Object(u["p"])("check_iccid",i);var s=(new Date).setTime((new Date).getTime()+6e4);Object(u["p"])("watch_card_timestamp",s),this.processCheckIccid(i)}else i&&Object(o["a"])({message:this.checkSearchIccid(i).msg});this.recording_show&&this.$nextTick(function(){var e=document.documentElement.clientHeight||document.body.clientHeight,r=t.$refs.ref_top.offsetHeight,i=t.$refs.ref_search.offsetHeight,c=t.$refs.ref_button.offsetHeight,n=t.$refs.recording_title.offsetHeight;t.$refs.main_recording.style.height=e-r-i-c-n-50+"px"})},methods:{testClick:function(){var t=this;"wechat"===this.client_type?this.wx.scanQRCode({needResult:1,scanType:["barCode","qrCode"],success:function(e){var r=e.resultStr;r.indexOf(",")>-1&&(r=r.substr(r.indexOf(",")+1,r.length)),t.iccid=r.replace(/\s*/g,""),t.processCheckIccid(t.iccid)}}):"alipay"===this.client_type&&ap.scan(function(e){var r=e.code;t.iccid=r.replace(/\s*/g,""),t.processCheckIccid(t.iccid)})},searchIccid:function(t){t?this.checkSearchIccid(t).state?this.processCheckIccid(t):Object(o["a"])({message:this.checkSearchIccid(t).msg}):Object(o["a"])({message:"请输入ICCID"})},processCheckIccid:function(t){var e=this;this.$store.commit("mifiCommon/changeLoadingStatus",{flag:!0}),Object(l["b"])("/api/v1/app/new_auth/check_auth_",{iccid:t}).then(function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(r){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.$store.commit("mifiCommon/changeLoadingStatus",{flag:!1}),i=Object(u["j"])("watchAutoSearch"),i&&(i++,Object(u["p"])("watchAutoSearch",i)),1===r.state?(Object(u["p"])("check_iccid",r.data.iccid),Object(u["p"])("new_auth_search_iccid",r.data.iccid),e.recordingIccid({iccid:r.data.iccid,realname:!(2===r.data.status||3===r.data.status)}),1===r.data.status&&e.$router.push({path:"/mifi/card/index"}),2!==r.data.status&&3!==r.data.status||([1,7,11,16],e.toRealname(r.data.iccid,r.data.source))):Object(o["a"])({message:r.msg});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},toRealname:function(t,e){var r=this,i=[45,46],c=!1;i.includes(e)&&(c=!0),Object(u["p"])("check_realNameSource",e),Object(l["a"])("/api/v1/app/cards/realname",{iccid:t}).then(function(i){1===i.data||c?window.location.href="".concat(r.global_variables.realname_url,"?iccid=").concat(t,"&source=").concat(e,"&urlType=2"):r.$router.push({path:"/weixin/new_card/real_name",query:{from:"mifi"}})})},recordingIccid:function(t){var e=!1;this.recording_list.length?(this.recording_list.map(function(r,i){r.iccid===t.iccid&&(r.searchTime=Object(u["h"])().searchTime,r.millisecond=Object(u["h"])().millisecond,r.realname=t.realname,e=!0)}),e||this.recording_list.push({iccid:t.iccid,searchTime:Object(u["h"])().searchTime,millisecond:Object(u["h"])().millisecond,realname:t.realname})):(this.recording_list.push({iccid:t.iccid,searchTime:Object(u["h"])().searchTime,millisecond:Object(u["h"])().millisecond,realname:t.realname}),this.recording_show=!0),this.recording_list.sort(this.compare("millisecond")),this.recording_list.length>20&&this.recording_list.splice(20),Object(u["p"])("recording_list",this.recording_list,"arr",!0)},scanIccid:function(){var t=this;"wechat"===this.client_type?this.wx.scanQRCode({needResult:1,scanType:["barCode","qrCode"],success:function(e){var r=e.resultStr;r.indexOf(",")>-1&&(r=r.substr(r.indexOf(",")+1,r.length)),t.iccid=r.replace(/\s*/g,""),t.processCheckIccid(t.iccid)}}):"alipay"===this.client_type&&ap.scan(function(e){var r=e.code;t.iccid=r.replace(/\s*/g,""),t.processCheckIccid(t.iccid)})},inArray:function(t,e,r){return null==e?-1:e.indexOf(t,r)},compare:function(t){return function(e,r){var i=e[t],c=r[t];return c-i}},checkSearchIccid:function(t){return t?(t.length<19||t.length>20||"89"!==t.substr(0,2))&&13!==t.length&&11!==t.length&&15!==t.length&&16!==t.length?{state:0,msg:"ICCID有误,请检查"}:{state:1}:{state:0,msg:"请输入ICCID"}},deleteIccid:function(t){for(var e=-1,r=0;r<this.recording_list.length;r++)if(this.recording_list[r].iccid===t){e=r;break}e>=0&&(this.recording_list.splice(e,1),Object(u["p"])("recording_list",this.recording_list,"arr")),this.recording_list.length||(this.recording_show=!1)},handleIccidFocus:function(){this.iccid?this.showClearBtn=!0:this.showClearBtn=!1},clearInputIccid:function(){this.iccid="",this.$refs.iccidDom.focus(),this.showClearBtn=!1},iccidBlur:function(){this.showClearBtn=!1},debounce:function(t,e){var r,i=this;return function(){for(var c=arguments.length,n=new Array(c),a=0;a<c;a++)n[a]=arguments[a];r&&clearTimeout(r),r=setTimeout(function(){t.apply(i,n)},e)}},getSource:function(t){var e=this,r=new Promise(function(t,r){Object(l["a"])("/api/v1/app/cards/details",{iccid:e.iccid}).then(function(e){1==e.state&&t(e.data.source)})});return r},toChangeCard:function(){this.$router.push({name:"eqReplaceMent",params:{status:1}}),localStorage.setItem("replaceStatus",1)}}},p=f,m=(r("72e8"),r("2877")),g=Object(m["a"])(p,c,n,!1,null,null,null);g.options.__file="lookup.vue";e["default"]=g.exports},d9ae:function(t,e,r){"use strict";var i=r("dca3"),c=r.n(i);c.a},dca3:function(t,e,r){}}]);
//# sourceMappingURL=mifi_card_lookup.7cb52280.js.map