(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["uploadIdInfo"],{6254:function(e,t,a){},"9d5e":function(e,t,a){"use strict";a.r(t);var i,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-id-card-wrapper",attrs:{id:"canvas-wrapper"}},[a("div",{staticClass:"step-bar-wrapper"},[a("div",{class:{active:0===e.step}},[a("div",{staticClass:"step-line step-one"}),a("div",{staticClass:"step-circle"},[a("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.step>0,expression:"step>0"}],attrs:{name:"success"}})],1),e._m(0)]),a("div",{class:{active:1===e.step}},[a("div",{staticClass:"step-line"}),a("div",{staticClass:"step-circle"},[a("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.step>1,expression:"step>1"}],attrs:{name:"success"}})],1),e._m(1)]),a("div",{class:{active:2===e.step}},[a("div",{staticClass:"step-line step-last"}),a("div",{staticClass:"step-circle"},[a("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.step>2,expression:"step>2"}],attrs:{name:"success"}})],1),e._m(2)])]),a("div",{staticClass:"step-content-wrapper",class:{none:0!==e.step}},[e._m(3),e._m(4),a("div",{staticClass:"step-camera-wrapper"},[a("div",{staticClass:"step-icon-camera"},[a("input",{staticClass:"btn-upload",attrs:{type:"file",capture:"camera",accept:"image/*"},on:{change:function(t){return e.handleUpload(t,0)}}})]),a("div",{staticClass:"btn-tip"},[e._v("拍摄身份证人像面")])])]),a("div",{staticClass:"step-content-wrapper",class:{none:1!==e.step}},[e._m(5),e._m(6),a("div",{staticClass:"step-camera-wrapper"},[a("div",{staticClass:"step-icon-camera"},[a("input",{staticClass:"btn-upload",attrs:{type:"file",capture:"camera",accept:"image/*"},on:{change:function(t){return e.handleUpload(t,1)}}})]),a("div",{staticClass:"btn-tip"},[e._v("拍摄身份者国徽面")])])]),a("div",{staticClass:"step-content-wrapper",class:{none:2!==e.step}},[e._m(7),e._m(8),a("div",{staticClass:"step-camera-wrapper step-camera-third"},[a("div",{staticClass:"step-icon-camera"},[a("input",{staticClass:"btn-upload",attrs:{type:"file",capture:"camera",accept:"image/*"},on:{change:function(t){return e.handleUpload(t,2)}}})]),a("div",{staticClass:"btn-tip"},[e._v("拍摄正面免冠照")])])]),a("div",{staticClass:"step-loading-wrapper"},[a("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:e.showLoading,callback:function(t){e.showLoading=t},expression:"showLoading"}},[a("van-loading",{attrs:{color:"#faca07"}}),a("div",[e._v(e._s(e.loadingMsg))])],1)],1)])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-content"},[a("div",[e._v("身份证人像面")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-content"},[a("div",[e._v("身份证国徽面")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-content"},[a("div",[e._v("正面免冠")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-tip-wrapper"},[a("p",{staticClass:"step-tip"},[e._v("真实拍摄身份证原件，无反光，无水印")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-content-first"},[a("div",{staticClass:"origin-img origin-img-first"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-tip-wrapper"},[a("p",{staticClass:"step-tip"},[e._v("真实拍摄身份证原件，无反光，无水印")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-content-second"},[a("div",{staticClass:"origin-img origin-img-second"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-tip-wrapper"},[a("p",{staticClass:"step-tip"},[e._v("真实拍摄持证人正面免冠照")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-content-third"},[a("div",{staticClass:"origin-img origin-img-third"})])}],c=(a("6762"),a("a322")),r=(a("c3a6"),a("ad06")),o=(a("9a83"),a("f564")),l=(a("8a58"),a("e41f")),d=(a("e7e5"),a("d399")),p=(a("7f7f"),a("ac1e"),a("543e")),u=(a("cadf"),a("551c"),a("097d"),a("db04")),v=a("35df"),f={name:"uploadIdCard",data:function(){return{step:0,previewUrl_0:null,previewUrl_1:null,previewUrl_2:null,img_file_0:null,img_file_1:null,img_file_2:null,showLoading:!1,loadingMsg:"",iccid:"",imei:"",phone:""}},components:(i={},Object(c["a"])(i,p["a"].name,p["a"]),Object(c["a"])(i,d["a"].name,d["a"]),Object(c["a"])(i,l["a"].name,l["a"]),Object(c["a"])(i,o["a"].name,o["a"]),Object(c["a"])(i,r["a"].name,r["a"]),i),created:function(){var e=Object(v["i"])("cardData","obj"),t=this;e||(Object(o["a"])({message:"信息丢失,即将跳转"}),setTimeout(function(){t.$router.push("/weixin/card/lookup")},2e3)),this.iccid=e.iccid,this.imei=e.imei,this.phone=e.phone},methods:{handleUpload:function(e,t){var a=this,i=e.currentTarget.files[0];if(i){var s=i.name.lastIndexOf("."),n=i.name.substring(s+1).toLowerCase(),c=["png","jpg","jpeg"];if(!c.includes(n))return;this.showLoading=!0;var r=document.createElement("canvas"),o=r.getContext("2d");if(i){var l=window.URL.createObjectURL(i),p=new Image;p.onload=function(){console.log("onload"),r.width=p.width,r.height=p.height,o.clearRect(0,0,r.width,r.height);var e=i.size/1024>1025?.5:.7;o.drawImage(p,0,0,p.width,p.height),a["previewUrl_".concat(t)]=r.toDataURL("image/jpeg",e),a.showLoading=!1,a["previewUrl_".concat(t)]?a.uploadImgs(t):Object(d["a"])({position:"top",message:"您上传的照片处理失败，请重新上传"})},p.src=l}}},uploadImgs:function(e){var t=this,a=this;this.showLoading=!0;var i=new FormData;i.append("file",this["previewUrl_".concat(e)]),Object(u["b"])("/verification/v1/upload/image",i).then(function(i){t.showLoading=!1,0===i.error&&200===i.status?(a["img_file_".concat(e)]=i.data,a.step=++e,a.step>2&&a.verifyInfo()):Object(o["a"])({message:i.msg})})},verifyInfo:function(){var e=this;this.loadingMsg="正在验证您的信息,请等候认证结果",this.showLoading=!0;var t=new FormData;t.append("iccid",this.iccid),t.append("imei",this.imei),t.append("front",this.img_file_0),t.append("back",this.img_file_1),t.append("frontar",this.img_file_2),t.append("mobile",this.phone),Object(u["b"])("/verification//v1/user/valids",t).then(function(t){0===t.error&&200===t.data.code?e.$router.push("/realname/audit_success"):e.$router.push("/realname/audit_fail")})}}},m=f,h=(a("9f41"),a("2877")),g=Object(h["a"])(m,s,n,!1,null,null,null);g.options.__file="uploadIdCard.vue";t["default"]=g.exports},"9f41":function(e,t,a){"use strict";var i=a("6254"),s=a.n(i);s.a},b258:function(e,t,a){},c3a6:function(e,t,a){"use strict";a("68ef")},d399:function(e,t,a){"use strict";var i=a("1988"),s=a("2b0e"),n=a("fe7e"),c=a("6605"),r=["success","fail","loading"],o=Object(n["a"])({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"van-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],class:e.b([e.style,e.position])},["text"===e.style?a("div",[e._v(e._s(e.message))]):e._e(),"html"===e.style?a("div",{domProps:{innerHTML:e._s(e.message)}}):e._e(),"default"===e.style?["loading"===e.type?a("loading",{attrs:{color:"white",type:e.loadingType}}):a("icon",{class:e.b("icon"),attrs:{name:e.type}}),e.isDef(e.message)?a("div",{class:e.b("text")},[e._v("\n        "+e._s(e.message)+"\n      ")]):e._e()]:e._e()],2)])},name:"toast",mixins:[c["a"]],props:{forbidClick:Boolean,message:[String,Number],type:{type:String,default:"text"},loadingType:{type:String,default:"circular"},position:{type:String,default:"middle"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},computed:{style:function(){return-1!==r.indexOf(this.type)?"default":this.type}},mounted:function(){this.toggleClickale()},destroyed:function(){this.toggleClickale()},watch:{value:function(){this.toggleClickale()},forbidClick:function(){this.toggleClickale()}},methods:{toggleClickale:function(){var e=this.value&&this.forbidClick;if(this.clickable!==e){this.clickable=e;var t=e?"add":"remove";document.body.classList[t]("van-toast--unclickable")}}}}),l=a("a142"),d={type:"text",mask:!1,message:"",value:!0,duration:3e3,position:"middle",loadingType:"circular",forbidClick:!1,overlayStyle:{}},p=function(e){return Object(l["d"])(e)?e:{message:e}},u=[],v=!0,f=Object(i["a"])({},d);function m(){if(l["e"])return{};if(!u.length||!v){var e=new(s["default"].extend(o))({el:document.createElement("div")});document.body.appendChild(e.$el),u.push(e)}return u[u.length-1]}function h(e){return e.overlay=e.mask,e}function g(e){void 0===e&&(e={});var t=m();return e=Object(i["a"])({},f,p(e),{clear:function(){t.value=!1,v||l["e"]||(document.body.removeChild(t.$el),t.$destroy())}}),Object(i["a"])(t,h(e)),clearTimeout(t.timer),e.duration>0&&(t.timer=setTimeout(function(){t.clear()},e.duration)),t}var _=function(e){return function(t){return g(Object(i["a"])({type:e},p(t)))}};["loading","success","fail"].forEach(function(e){g[e]=_(e)}),g.clear=function(e){u.length&&(e?(u.forEach(function(e){e.clear()}),u=[]):v?u[0].clear():u.shift().clear())},g.setDefaultOptions=function(e){Object(i["a"])(f,e)},g.resetDefaultOptions=function(){f=Object(i["a"])({},d)},g.allowMultiple=function(e){void 0===e&&(e=!0),v=!e},g.install=function(){s["default"].use(o)},s["default"].prototype.$toast=g;t["a"]=g},e7e5:function(e,t,a){"use strict";a("68ef"),a("4d75"),a("b258")}}]);
//# sourceMappingURL=uploadIdInfo.4e3df9e7.js.map