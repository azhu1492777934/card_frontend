(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["card_usage"],{2134:function(a,e,t){},"2c53":function(a,e,t){a.exports=t.p+"img/unicom-logo.82459452.svg"},"2e44":function(a,e,t){a.exports=t.p+"img/mobile-logo.113f99e2.png"},"51d7":function(a,e,t){"use strict";var s=t("2134"),i=t.n(s);i.a},"634e":function(a,e,t){a.exports=t.p+"img/telecom-logo.5f1f3403.svg"},"96ab":function(a,e,t){a.exports=t.p+"img/bg_no_recharge.aecc9531.svg"},b066:function(a,e,t){a.exports=t.p+"img/bg_no_plan.275be51a.svg"},b258:function(a,e,t){},d399:function(a,e,t){"use strict";var s=t("1988"),i=t("2b0e"),n=t("d282"),r=t("a142"),o=t("6605"),l=t("ad06"),c=t("543e"),d=Object(n["a"])("toast"),f=d[0],u=d[1],_=f({mixins:[o["a"]],props:{icon:String,className:null,loadingType:String,forbidClick:Boolean,message:[String,Number],type:{type:String,default:"text"},position:{type:String,default:"middle"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},mounted:function(){this.toggleClickable()},destroyed:function(){this.toggleClickable()},watch:{value:function(){this.toggleClickable()},forbidClick:function(){this.toggleClickable()}},methods:{toggleClickable:function(){var a=this.value&&this.forbidClick;if(this.clickable!==a){this.clickable=a;var e=a?"add":"remove";document.body.classList[e]("van-toast--unclickable")}},onAfterEnter:function(){this.$emit("opened"),this.onOpened&&this.onOpened()},onAfterLeave:function(){this.$emit("closed")}},render:function(a){var e=this.type,t=this.icon,s=this.message,i=this.loadingType,n=t||"success"===e||"fail"===e;function o(){return n?a(l["a"],{class:u("icon"),attrs:{name:t||e}}):"loading"===e?a(c["a"],{class:u("loading"),attrs:{color:"white",type:i}}):void 0}function d(){if(Object(r["b"])(s)&&""!==s)return"html"===e?a("div",{class:u("text"),domProps:{innerHTML:s}}):a("div",{class:u("text")},[s])}return a("transition",{attrs:{name:"van-fade"},on:{afterEnter:this.onAfterEnter,afterLeave:this.onAfterLeave}},[a("div",{directives:[{name:"show",value:this.value}],class:[u([this.position,{text:!n&&"loading"!==e}]),this.className]},[o(),d()])])}}),p={icon:"",type:"text",mask:!1,value:!0,message:"",className:"",onClose:null,onOpened:null,duration:3e3,position:"middle",forbidClick:!1,loadingType:void 0,getContainer:"body",overlayStyle:null},g=[],h=!1,v=Object(s["a"])({},p);function w(a){return Object(r["c"])(a)?a:{message:a}}function C(){if(r["d"])return{};if(!g.length||h){var a=new(i["default"].extend(_))({el:document.createElement("div")});g.push(a)}return g[g.length-1]}function I(a){return a=Object(s["a"])({},a),a.overlay=a.mask,delete a.mask,delete a.duration,a}function b(a){void 0===a&&(a={});var e=C();return e.value&&e.updateZIndex(),a=Object(s["a"])({},v,w(a),{clear:function(){e.value=!1,a.onClose&&a.onClose(),h&&!r["d"]&&e.$on("closed",function(){clearTimeout(e.timer),g=g.filter(function(a){return a!==e});var a=e.$el.parentNode;a&&a.removeChild(e.$el),e.$destroy()})}}),Object(s["a"])(e,I(a)),clearTimeout(e.timer),a.duration>0&&(e.timer=setTimeout(function(){e.clear()},a.duration)),e}var m=function(a){return function(e){return b(Object(s["a"])({type:a},w(e)))}};["loading","success","fail"].forEach(function(a){b[a]=m(a)}),b.clear=function(a){g.length&&(a?(g.forEach(function(a){a.clear()}),g=[]):h?g.shift().clear():g[0].clear())},b.setDefaultOptions=function(a){Object(s["a"])(v,a)},b.resetDefaultOptions=function(){v=Object(s["a"])({},p)},b.allowMultiple=function(a){void 0===a&&(a=!0),h=a},b.install=function(){i["default"].use(_)},i["default"].prototype.$toast=b;e["a"]=b},e7e5:function(a,e,t){"use strict";t("68ef"),t("4d75"),t("09fe"),t("b258")},fdca:function(a,e,t){"use strict";t.r(e);var s,i=function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("div",{staticClass:"plan-usage-wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!a.load_skeleton,expression:"!load_skeleton"}]},[s("div",{ref:"refCardInfo",staticClass:"card-info-wrap"},[s("div",{staticClass:"operation-logo-wrap"},[s("img",{attrs:{src:a.filterCardInfo.operator_logo,alt:""}})]),s("div",{staticClass:"card-info-detail"},[a.filterCardInfo.is_watch_card?s("p",[a._v("手表手机号:"+a._s(a.filterCardInfo.msisdn))]):s("p",[a._v("MSISDN:"+a._s(a.filterCardInfo.msisdn))]),s("p",{class:{"p-t-45":!a.usageInfo.imei||"864319031839011"==a.usageInfo.imei}},[a._v("\n            ICCID:"+a._s(a.usageInfo.iccid)+"(编码:"+a._s(a.usageInfo.source)+")")]),a.usageInfo.imei&&"864319031839011"!=a.usageInfo.imei?s("p",[a._v("IMEI:"+a._s(a.usageInfo.imei))]):a._e(),s("div",{staticClass:"card-state-wrap"},[s("div",[s("span",{class:a.usageInfo.auth_status>=3?"cl-state-normal":"cl-state-warning"},[a._v(a._s(a.filterCardInfo.real_name_state))]),""==a.filterCardInfo.device_state?s("span",{class:1!=a.usageInfo.status?"cl-state-warning":"cl-state-primary"},[a._v(a._s(a.filterCardInfo.card_str_state))]):a._e(),""!=a.filterCardInfo.device_state?s("span",{class:1==a.filterCardInfo.device_state.code?"cl-state-primary":"cl-state-warning"},[a._v(a._s(a.filterCardInfo.device_state.state))]):a._e()]),s("div",[s("em",{on:{click:a.refreshOrActivated}},[a._v(a._s(a.filterCardInfo.refresh_actived))]),s("a",{on:{click:function(e){a.toQ()}}},[a._v("问题中心>")])])])])]),s("div",{ref:"refCardData"},[a.filterCardInfo.is_flow_card?s("div",{staticClass:"card-used-wrap"},[s("p",{staticClass:"card-surplus-flow"},[s("span",[a._v("剩余流量")]),s("span",[a._v(a._s(this.filterCardInfo.flow_card_usage.detail_right))])]),s("div",{staticClass:"card-flow-detail"},[s("div",{staticClass:"card-used-data-wrap"},[s("p",[s("span",[a._v("总流量:"+a._s(this.filterCardInfo.flow_card_usage.total_flow)+" / ")]),s("span",[a._v("已使用:"+a._s(this.filterCardInfo.flow_card_usage.used_flow))])])]),s("div",{staticClass:"to-flow-wrap",on:{click:a.toConnection}},[s("a",[a._v(" 流量用量详情> ")])])])]):s("div",{staticClass:"card-used-wrap"},[s("p",{staticClass:"card-surplus-flow"},[s("span",[a._v("剩余流量")]),s("span",[a._v(a._s(this.filterCardInfo.watch_card_usage.detail_right))])]),s("div",{staticClass:"card-flow-detail"},[s("div",{staticClass:"card-used-data-wrap"},[s("p",[s("span",[a._v("总流量:"+a._s(this.filterCardInfo.watch_card_usage.total_flow)+" / ")]),s("span",[a._v("已使用:"+a._s(this.filterCardInfo.watch_card_usage.used_flow))])]),s("p",[s("span",[a._v("总通话:"+a._s(this.filterCardInfo.watch_card_usage.total_voice)+" / ")]),s("span",[a._v("已使用:"+a._s(this.filterCardInfo.watch_card_usage.used_voice))])])]),s("div",{staticClass:"to-flow-wrap",on:{click:a.toConnection}},[s("a",[a._v(" 流量用量详情> ")])])])])]),s("div",{staticClass:"card-plan-wrap"},[s("p",{ref:"refPlanTitle",staticClass:"card-plan-wrap-title"},a._l(a.plan_title_array,function(e,t){return s("span",{key:t,class:{checked:t==a.cur_plan_type_index},on:{click:function(e){a.planTypeClikc(t)}}},[a._v("\n            "+a._s(e)+"\n          ")])})),s("div",{staticClass:"van-swipe-wrap",class:{"plan-no-user__height":a.plan_list_height.is_normal,"plan-has-user__height":a.plan_list_height.is_c_frontend,"plan-app__height":a.plan_list_height.is_app}},[s("swiper",{ref:"mySwiper",attrs:{options:a.swiperOption}},[s("swiper-slide",[a.hasUsagePlan?s("ul",{staticClass:"usage-plan-wrap"},a._l(a.usageInfo.usage.plans,function(e,t){return s("li",{key:t},[s("div",{staticClass:"plan-info-wrap"},[s("p",{staticClass:"plan-name"},[a._v(a._s(e.rps_name))]),s("div",{staticClass:"plan-describe"},[e.planCellInfo&&"{}"!=JSON.stringify(e.planCellInfo)?s("div",["MG500"!=e.planCellInfo.key?s("div",[e.describe&&"None"!=e.describe?s("p",[s("span",[a._v(a._s(e.describe))]),s("br"),s("span",{},[a._v(a._s(e.remark))])]):s("p",[s("span",[a._v(a._s(e.remark))])])]):a._e(),e.planCellInfo.max_high?s("span",[a._v("高速流量:"+a._s(e.planCellInfo.max_high)+",已使用"+a._s(e.planCellInfo.used_high))]):a._e(),s("br"),e.planCellInfo.max_normal?s("span",[a._v("中速流量:"+a._s(e.planCellInfo.max_normal))]):a._e()]):s("div",[e.describe&&"None"!=e.describe?s("p",[s("span",[a._v(a._s(e.describe))]),s("br"),s("span",[a._v(a._s(e.remark))])]):s("p",[s("span",[a._v(a._s(e.remark))])])])])]),s("div",{staticClass:"plan-date-wrap"},[a.inArray(a.usageInfo.source,a.watch_source)>=0||a.inArray(a.usageInfo.source,[1,7,8])>=0?s("p",{staticClass:"plan-date"},[s("span",[a._v("开始日期:"+a._s(a.filterDate(e.activated_at)))]),s("br"),s("span",[a._v("有效日期:"+a._s(a.filterDate(e.expired_at)))])]):e.expired_at?s("p",{staticClass:"plan-date"},[s("span",[a._v("有效日期:"+a._s(a.filterDate(e.expired_at)))])]):a._e(),e.planCellInfo&&"{}"!=JSON.stringify(e.planCellInfo)?s("div",{staticClass:"speedup-wrap"},["MG500"!=e.planCellInfo.key?s("span",[1==e.planCellInfo.plan_cell_status?s("a",{attrs:{href:"/weixin/speedup/plan_80"}},[a._v("购买加速包")]):a._e()]):s("span",[1==e.planCellInfo.plan_cell_status?s("a",{attrs:{href:"/weixin/speedup/plan_500"}},[a._v("购买加速包")]):a._e()])]):a._e(),a.usagePlanLength>1&&a.inArray(a.usageInfo.source,a.watch_source)<0?s("div",{staticClass:"prefer_use"},[e.priority>=1?s("a",{on:{click:function(t){a.prefer_use_operate(a.usageInfo.iccid,e.id,e.priority,a.usageInfo.source,e.order_id)}}},[a._v("优先使用")]):a._e(),0==e.priority?s("a",{on:{click:function(t){a.prefer_use_operate(a.usageInfo.iccid,e.id,e.priority,a.usageInfo.source,e.order_id)}}},[a._v("取消优先")]):a._e()]):a._e()])])})):s("div",{staticClass:"no-plan"},[s("img",{attrs:{src:t("b066"),alt:""}})])]),s("swiper-slide",[a.hasOrderPlan?s("ul",{staticClass:"order-plan-wrap"},a._l(a.usageInfo.orders,function(e,t){return s("li",{key:t},[s("div",{staticClass:"plan-info-wrap"},[s("p",{staticClass:"plan-name"},[a._v(a._s(e.name))]),2522==e.rating_id?s("p",{staticClass:"plan-describe"},[s("span",[a._v("月底清零,30天有效,全国通用,有效期或流量任一用完即停机，套餐包含：20G高速流量，480G中速流量，中速流量可使用加速包提升为高速流量。")])]):s("p",{staticClass:"plan-describe"},[e.describe&&"None"!=e.describe&&""!=e.describe?s("span",[a._v(a._s(e.describe))]):a._e(),s("br"),e.describe&&""!=e.describe&&"None"!=e.describe?a._e():s("span",{},[a._v(a._s(e.remark))])]),s("p",{staticClass:"plan-orderNo"},[a._v("订单号:"+a._s(e.no))])]),s("div",{staticClass:"plan-date-wrap"},[s("p",{staticClass:"plan-date"},[s("span",[a._v("续费日期:"+a._s(a.filterDate(e.created_at)))])]),s("p",{staticClass:"plan-order-status-wrap"},[2==e.refund?s("span",[a._v("已退款")]):a._e(),2!=e.refund&&-1!=e.status?s("span",[a._v(a._s(a.order_state[e.status]))]):a._e(),2!=e.refund&&-1==e.status?s("span",[a._v("已删除")]):a._e()])])])})):s("div",{staticClass:"no-plan"},[s("img",{attrs:{src:t("96ab"),alt:""}})])])],1)],1)]),s("div",{ref:"refCardButton",staticClass:"btn-recharge-wrap"},[s("button",{on:{click:a.recharge}},[a._v("充值续费")]),s("a",{on:{click:function(e){a.toCard()}}},[a._v("卡券兑换")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:a.load_skeleton,expression:"load_skeleton"}],staticClass:"fixed-wrap-loading"},[a._m(0)]),s("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:a.priorityShow,callback:function(e){a.priorityShow=e},expression:"priorityShow"}},[s("van-loading",{attrs:{size:"50px",vertical:"",color:"#1989fa"}},[a._v("\n        加载中...\n      ")])],1)],1)},n=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{attrs:{id:"loading-common-center"}},[t("div",{attrs:{id:"loading-common-center-inner"}},[t("div",{staticClass:"loading-object",attrs:{id:"first_object"}}),t("div",{staticClass:"loading-object",attrs:{id:"second_object"}}),t("div",{staticClass:"loading-object",attrs:{id:"third_object"}})])])}],r=(t("6b54"),t("a322")),o=(t("ac1e"),t("543e")),l=(t("e7e5"),t("d399")),c=(t("8a58"),t("e41f")),d=(t("7f7f"),t("9a83"),t("f564")),f=(t("cadf"),t("551c"),t("097d"),t("7212")),u=t("35df"),_=t("db04"),p={name:"home",data:function(){var a=this;return{client_type:Object(u["d"])(),iccid:"",load_skeleton:!0,load_plan_msg:"",watch_source:[5,10,12,17,18,20,22,32,38,44],auth_status:["未实名","审核中","审核不通过"],card_state:["未激活","已激活","已停机","已废弃","可测试","可激活"],order_state:["未支付","已支付","已到账"],plan_title_array:["当前套餐","历史续费套餐"],cur_plan_type_index:0,filterCardInfo:{operator_logo:"",msisdn:"",device_state:"",card_str_state:"",real_name_state:"",refresh_actived:"",is_watch_card:!1,is_flow_card:!1,watch_card_usage:{total_flow:"",used_flow:"",total_voice:"",used_voice:"",detail_right:""},flow_card_usage:{total_flow:"",used_flow:"",detail_right:""}},hasUsagePlan:!1,usagePlanLength:0,hasOrderPlan:!1,usageInfo:{},priorityShow:!1,swiperOption:{on:{slideChangeTransitionEnd:function(e){a.cur_plan_type_index=this.activeIndex}}},plan_list_height:{is_app:!1,is_c_frontend:!0,is_normal:!1}}},components:(s={},Object(r["a"])(s,d["a"].name,d["a"]),Object(r["a"])(s,c["a"].name,c["a"]),Object(r["a"])(s,l["a"].name,l["a"]),Object(r["a"])(s,o["a"].name,o["a"]),Object(r["a"])(s,"swiper",f["swiper"]),Object(r["a"])(s,"swiperSlide",f["swiperSlide"]),s),created:function(){Object(u["o"])("hasValidatedPlan"),Object(u["o"])("plan_list_new_card"),this.initial()},mounted:function(){},methods:{initial:function(){var a=this;Object(u["j"])("check_iccid")?(this.iccid=Object(u["j"])("check_iccid"),Object(_["a"])("/api/v1/app/cards/telcom/usage",{iccid:Object(u["j"])("check_iccid")}).then(function(e){a.load_skeleton=!1,a.priorityShow=!1,1===e.state?(a.usageInfo=e.data,0===a.usageInfo.operator?a.filterCardInfo.operator_logo=t("2c53"):1===a.usageInfo.operator?a.filterCardInfo.operator_logo=t("2e44"):a.filterCardInfo.operator_logo=t("634e"),a.inArray(a.usageInfo.source,a.watch_source)>=0&&19!==a.usageInfo.source&&"86"===a.usageInfo.msisdn.substr(0,2)?a.filterCardInfo.msisdn=a.usageInfo.msisdn.substr(2,a.usageInfo.msisdn.length):a.filterCardInfo.msisdn=a.usageInfo.msisdn,a.inArray(a.usageInfo.source,[1,4])>=0?a.auth_status.push("手淘实名"):a.auth_status.push("已实名"),a.usageInfo.need_auth?a.filterCardInfo.real_name_state=a.auth_status[a.usageInfo.auth_status]:a.filterCardInfo.real_name_state="已实名",a.filterCardInfo.real_name_state=a.auth_status[a.usageInfo.auth_status],a.inArray(a.usageInfo.source,[0,2]),a.inArray(a.usageInfo.source,[1,5])>=0&&a.usageInfo.imei&&(a.usageInfo.usage.imei&&a.usageInfo.fenli?2===a.usageInfo.status?a.filterCardInfo.device_state={state:"机卡已分离停机",code:2}:a.filterCardInfo.device_state={state:"机卡分离",code:2}:a.filterCardInfo.device_state={state:"机卡已绑定",code:1}),a.filterCardInfo.card_str_state=a.card_state[a.usageInfo.status],2===a.usageInfo.status?a.filterCardInfo.refresh_actived="激活":a.filterCardInfo.refresh_actived="刷新",a.inArray(a.usageInfo.source,a.watch_source)>=0?(a.filterCardInfo.is_watch_card=!0,a.filterCardInfo.is_flow_card=!1,1===a.usageInfo.usage.noMax?(a.filterCardInfo.watch_card_usage.total_flow="无限",a.filterCardInfo.watch_card_usage.detail_right="无限"):(a.filterCardInfo.watch_card_usage.total_flow=a.flowUnit(a.usageInfo.usage.total,0,1),a.filterCardInfo.watch_card_usage.detail_right=a.flowUnit(0,{watchCard:!0,total:a.usageInfo.usage.total,used:a.usageInfo.usage.used},0)),a.filterCardInfo.watch_card_usage.used_flow=a.flowUnit(a.usageInfo.usage.used,0,0),1===a.usageInfo.usage.noMaxVoice?a.filterCardInfo.watch_card_usage.total_voice="无限":a.filterCardInfo.watch_card_usage.total_voice=Object(u["q"])(a.usageInfo.usage.totalVoice)+"分钟",a.filterCardInfo.watch_card_usage.used_voice=Object(u["q"])(a.usageInfo.usage.usedVoice)+"分钟",localStorage.setItem("is_flow_card",0)):(a.filterCardInfo.is_watch_card=!1,a.filterCardInfo.is_flow_card=!0,6!==a.usageInfo.source&&1!==a.usageInfo.usage.noMax||(a.filterCardInfo.flow_card_usage.total_flow="无限",a.filterCardInfo.flow_card_usage.detail_right="无限"),6!==a.usageInfo.source&&1!==a.usageInfo.usage.noMax&&(a.filterCardInfo.flow_card_usage.total_flow=a.flowUnit(a.usageInfo.usage.total,0,1),a.filterCardInfo.flow_card_usage.detail_right=a.flowUnit(0,{flowCard:!0,total:a.usageInfo.usage.total,used:a.usageInfo.usage.used},0)),a.filterCardInfo.flow_card_usage.used_flow=a.flowUnit(a.usageInfo.usage.used,0,0),localStorage.setItem("is_flow_card",1)),a.hasUsagePlan=!!a.usageInfo.usage.plans.length,a.usagePlanLength=a.usageInfo.usage.plans.length,a.hasOrderPlan=!!a.usageInfo.orders.length,"iphone"===a.global_variables.device&&"app"===a.client_type?a.plan_list_height.is_app=!0:(a.plan_list_height.is_app=!1,"wechat"===a.client_type||"alipay"===a.client_type?a.plan_list_height.is_c_frontend=!0:(a.plan_list_height.is_c_frontend=!1,a.plan_list_height.is_normal=!0))):Object(l["a"])({icon:"warning-o",message:e.msg,mask:!0,duration:0,forbidClick:!0})})):this.$router.push({path:"/weixin/card/lookup"})},planTypeClikc:function(a){this.cur_plan_type_index=a,this.$refs.mySwiper.swiper.slideTo(a)},recharge:function(){Object(u["p"])("check_iccid",this.iccid),this.hasUsagePlan&&Object(u["p"])("hasValidatedPlan",this.hasUsagePlan),Object(u["c"])(2),this.$router.push({path:"/weixin/card/plan_list"})},refreshOrActivated:function(){if("刷新"===this.filterCardInfo.refresh_actived)Object(u["c"])(8),location.reload();else{if(!this.usageInfo.canActivated)return void Object(d["a"])({message:"无效套餐,无法激活",background:"#ff0752"});if(this.usageInfo.usage.used>=this.usageInfo.usage.total&&this.usageInfo.usage.total>0)return void Object(d["a"])({message:"流量已用完,不能激活,请充值",background:"#ff0752"});Object(_["b"])("/api/v1/app/activated",{iccid:this.iccid}).then(function(a){1===a.state&&Object(d["a"])({message:"请在5分钟内放回原绑定的设备中开机,否则会被停机",background:"#00c2ff"})})}},toConnection:function(){Object(u["c"])(13),Object(u["p"])("check_iccid",this.iccid),this.$router.push({path:"/weixin/card/connection"})},inArray:function(a,e,t){return null==e?-1:e.indexOf(a,t)},flowUnit:function(a,e,t){return"[object Object]"===Object.prototype.toString.call(e)&&e.watchCard?e.total===e.used?"0.00MB":Object(u["q"])(e.total-e.used)+"MB":"[object Object]"===Object.prototype.toString.call(e)&&e.flowCard?e.total===e.used?"0.00GB":e.total-e.used<0?"0.00GB":e.total-e.used>=1024?Object(u["q"])(e.total/1024-e.used/1024)+"GB":Object(u["q"])(e.total-e.used)+"MB":a>=1024?Object(u["q"])(a/1024)+"GB":Object(u["q"])(a)+"MB"},prefer_use_operate:function(a,e,t,s,i){var n=this;this.priorityShow=!0,Object(_["b"])("/api/v1/app/plans/stick",{iccid:a,rating_id:e,priority:t>0?1:0,source:s,order_id:i}).then(function(a){1===a.state?(Object(d["a"])({message:a.msg}),n.initial()):(n.priorityShow=!1,Object(d["a"])({message:a.msg}))})},toQ:function(){Object(u["c"])(9),this.$router.push({path:"/weixin/question/index"})},toCard:function(){Object(u["c"])(14),this.$router.push({path:"/weixin/coupon/index"})}}},g=p,h=(t("51d7"),t("2877")),v=Object(h["a"])(g,i,n,!1,null,null,null);v.options.__file="usage.vue";e["default"]=v.exports}}]);
//# sourceMappingURL=card_usage.fc1136dc.js.map