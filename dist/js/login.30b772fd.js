(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"6eca":function(e,t,i){"use strict";var n=i("b768"),o=i.n(n);o.a},"9ed6":function(e,t,i){"use strict";i.r(t);var n,o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login-wrap"},[i("div",{staticClass:"info-wrap"},[i("div",{staticClass:"phone-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"text",placeholder:"请输入微信绑定的手机号码，非新卡",maxlength:"11"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),i("div",{staticClass:"code-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"number",placeholder:"请输入验证码",maxlength:"10"},domProps:{value:e.code},on:{input:[function(t){t.target.composing||(e.code=t.target.value)},function(t){e.limlit()}]}}),i("button",{staticClass:"getCode",attrs:{disabled:e.btnCode_disabled},on:{click:e.getCode}},[e._v(e._s(e.codeText))])]),i("div",{staticClass:"btn-login-wrap"},[i("button",{attrs:{disabled:e.loginDisabled},on:{click:e.login}},[e._v("绑定账户")])]),e._m(0)]),i("van-popup",{attrs:{"close-on-click-overlay":!0},model:{value:e.isLoginError,callback:function(t){e.isLoginError=t},expression:"isLoginError"}},[i("p",{staticClass:"showTip"},[e._v(e._s(e.loginErrorMsg))])])],1)},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"phone-tip"},[e._v("\n      温馨提示"),i("br"),e._v("以'145','146','166','177','191','199'号段开头的号码无法接收短信验证码\n    ")])}],s=(i("6762"),i("a322")),c=(i("8a58"),i("e41f")),r=(i("7f7f"),i("9a83"),i("f564")),d=(i("cadf"),i("551c"),i("097d"),i("db04")),l=i("35df"),u={data:function(){return{decrypt_data:{},phone:"",code:"",codeText:"获取验证码",countdown:60,state:"",client_type:"",btnCode_disabled:!1,time:null,loginDisabled:!1,isLoginError:!1,loginErrorMsg:""}},components:(n={},Object(s["a"])(n,r["a"].name,r["a"]),Object(s["a"])(n,c["a"].name,c["a"]),n),created:function(){"wechat"===Object(l["d"])()?this.client_type="wechat":"alipay"===Object(l["d"])()&&(this.client_type="alipay"),"wechat"!==Object(l["d"])()&&"alipay"!==Object(l["d"])()||Object(l["n"])({type:0}),this.decrypt_data=Object(l["j"])("decrypt_data","obj")},methods:{login:function(){var e=this;this.phone||this.code?/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.phone)?(this.loginDisabled=!0,Object(l["n"])({type:1,phone:this.phone}),Object(d["b"])("/accountCenter/v2/user/bind?"+Object(l["g"])({},"post"),{mobile:this.phone,code:this.code,from:this.client_type,uuid:this.decrypt_data.openid,nickname:this.decrypt_data.nickname,gender:this.decrypt_data.sex,avatar:this.decrypt_data.headimgurl}).then(function(t){if(e.loginDisabled=!1,0===t.error){var i=e;Object(l["q"])("token",t.data),Object(r["a"])({message:"账户绑定成功",background:"#60ce53"}),setTimeout(function(){"esim"===localStorage.getItem("currentType")?i.$router.push({path:"/weixin/card/esim_usage"}):"userCenter"===localStorage.getItem("currentType")?i.$router.push({path:"/weixin/userCenter/index"}):i.$router.push({path:"/weixin/card/lookup"})},2e3)}else if(11002===t.error)e.$emit("getToken");else if(30002===t.error)if(Object(r["a"])({message:"帐户绑定成功",background:"#60ce53"}),"esim"===localStorage.getItem("currentType"))location.href="/weixin/card/esim_usage";else if("userCenter"===localStorage.getItem("currentType"))location.href="/weixin/userCenter/index";else{var n=Object(l["j"])("authorized_redirect_uri");Object(l["j"])("check_iccid")?location.href=n:location.href="/weixin/card/lookup"}else 20014===t.error?(e.code="",Object(r["a"])({message:"用户绑定超时，请重新绑定"})):(e.isLoginError=!0,t.msg?e.loginErrorMsg=t.msg:e.loginErrorMsg="绑定用户失败，请反馈我司客服。")})):Object(r["a"])({message:"您的手机号码有误"}):Object(r["a"])({message:"请填写您的信息"})},getCode:function(){var e=this;if(this.phone)if(/^(13[0-9]|14[5679]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.phone)){var t=this.phone.substr(0,3),i=["145","146","166","177","199"];i.includes(t)?Object(r["a"])({message:"不支持以145,146,166,177,199开头的手机号码"}):(Object(r["a"])({message:"温馨提示：请使用本人手机号绑定账号。"}),this.countDownFun(),Object(d["b"])("/accountCenter/v2/verify/send?"+Object(l["g"])({},"post"),{mobile:this.phone}).then(function(t){0===t.error?Object(r["a"])({message:"验证码发送成功",background:"#60ce53"}):11002===t.error?e.$emit("getToken"):Object(r["a"])({message:t.msg})}))}else Object(r["a"])({message:"请填写正确的手机号码"});else Object(r["a"])({message:"请输入您的手机号码"})},countDownFun:function(){var e=this,t=this;this.btnCode_disabled=!0,clearInterval(this.timer),this.timer=setInterval(function(){t.countdown<=0?(t.codeText="获取验证码",t.countdown=60,t.btnCode_disabled=!1,clearInterval(t.timer)):(t.codeText=e.countdown+"s",t.countdown--)},1e3)},limlit:function(){8==this.code.length&&(this.code=this.code.slice(0,4)),12==this.code.length&&(this.code=this.code.slice(0,6))}}},p=u,h=(i("6eca"),i("2877")),g=Object(h["a"])(p,o,a,!1,null,null,null);g.options.__file="index.vue";t["default"]=g.exports},b768:function(e,t,i){}}]);
//# sourceMappingURL=login.30b772fd.js.map