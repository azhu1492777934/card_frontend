(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["esim_usage"],{"175b":function(e,a,t){"use strict";t.r(a);var s,i=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"plan-usage-wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.load_plan,expression:"!load_plan"}]},[s("div",{ref:"refCardInfo",staticClass:"card-info-wrap"},[s("div",{staticClass:"operation-logo-wrap"},[s("img",{attrs:{src:e.filterCardInfo.operator_logo,alt:""}})]),s("div",{staticClass:"card-info-detail"},[e.filterCardInfo.is_watch_card?s("p",[e._v("手表手机号:"+e._s(e.filterCardInfo.msisdn))]):s("p",[e._v("MSISDN:"+e._s(e.filterCardInfo.msisdn))]),s("p",{class:{"p-t-45":!e.usageInfo.imei||"864319031839011"==e.usageInfo.imei}},[e._v("ICCID:"+e._s(e.usageInfo.iccid)+"(编码:"+e._s(e.usageInfo.source)+")")]),e.usageInfo.imei&&"864319031839011"!=e.usageInfo.imei?s("p",[e._v("IMEI:"+e._s(e.usageInfo.imei))]):e._e(),s("div",{staticClass:"card-state-wrap"},[s("div",[s("span",{class:e.usageInfo.auth_status>=3?"cl-state-normal":"cl-state-warning"},[e._v(e._s(e.filterCardInfo.real_name_state))]),""==e.filterCardInfo.device_state?s("span",{class:e.usageInfo.status>=3?"cl-state-normal":"cl-state-primary"},[e._v(e._s(e.filterCardInfo.card_str_state))]):e._e(),""!=e.filterCardInfo.device_state?s("span",{class:1==e.filterCardInfo.device_state.code?"cl-state-primary":"cl-state-warning"},[e._v(e._s(e.filterCardInfo.device_state.state))]):e._e()]),s("div",[s("em",{on:{click:e.refreshOrActivated}},[e._v(e._s(e.filterCardInfo.refresh_actived))]),s("router-link",{attrs:{to:"/weixin/question/index"}},[e._v("?")])],1)])])]),s("div",{ref:"refCardData"},[e.filterCardInfo.is_flow_card?s("div",{staticClass:"flowStyle"},[s("div",{staticClass:"domesticFlow"},[s("div",[e._v("国内流量")]),s("div",[s("div",[s("div",[e._v("流量总量")]),s("div",[e._v(e._s(this.filterCardInfo.flow_card_usage.total_flow))])]),s("div",[s("div",[e._v("已使用")]),s("div",[e._v(e._s(this.filterCardInfo.flow_card_usage.used_flow))])]),s("div",[s("div",[e._v("剩余流量")]),s("div",[e._v(e._s(this.filterCardInfo.flow_card_usage.detail_right))])])])]),s("div",{staticClass:"foreignFlow"},[s("div",[e._v("国际流量")]),s("div",[s("div",[s("div",[e._v("流量总量")]),s("div",[e._v(e._s(this.filterCardInfo.flow_card_usage.fTotal_flow))])]),s("div",[s("div",[e._v("已使用")]),s("div",[e._v(e._s(this.filterCardInfo.flow_card_usage.fUsed_flow))])]),s("div",[s("div",[e._v("剩余流量")]),s("div",[e._v(e._s(this.filterCardInfo.flow_card_usage.fDetail_right))])])])])]):s("div",[s("div",[s("div",[e._v("国内流量")]),s("div",[s("div",[s("div",[e._v("流量总量")]),s("div",[e._v(e._s(this.filterCardInfo.watch_card_usage.total_flow))])]),s("div",[s("div",[e._v("已使用")]),s("div",[e._v(e._s(this.filterCardInfo.watch_card_usage.used_flow))])]),s("div",[s("div",[e._v("剩余流量")]),s("div",[e._v(e._s(this.filterCardInfo.watch_card_usage.detail_right))])])])]),s("div",[s("div",[e._v("国际流量")]),s("div",[s("div",[s("div",[e._v("流量总量")]),s("div",[e._v(e._s(this.filterCardInfo.watch_card_usage.fTotal_flow))])]),s("div",[s("div",[e._v("已使用")]),s("div",[e._v(e._s(this.filterCardInfo.watch_card_usage.fUsed_flow))])]),s("div",[s("div",[e._v("剩余流量")]),s("div",[e._v(e._s(this.filterCardInfo.watch_card_usage.fDetail_right))])])])])])]),s("div",{staticClass:"card-plan-wrap"},[s("p",{ref:"refPlanTitle",staticClass:"card-plan-wrap-title"},e._l(e.plan_title_array,function(a,t){return s("span",{class:{checked:t==e.cur_plan_type_index},on:{click:function(a){e.planTypeClikc(t)}}},[e._v(e._s(a))])})),s("div",{staticClass:"van-swipe-wrap"},[s("swiper",{ref:"mySwiper",attrs:{options:e.swiperOption}},[s("swiper-slide",[e.hasUsagePlan?s("ul",{directives:[{name:"bounce",rawName:"v-bounce"}],staticClass:"usage-plan-wrap"},e._l(e.usageInfo.usage.plans,function(a,t){return s("li",[s("div",{staticClass:"plan-info-wrap"},[s("p",{staticClass:"plan-name"},[e._v(e._s(a.rps_name))]),s("div",{staticClass:"plan-split"}),s("div",{staticClass:"plan-describe"},[a.planCellInfo&&"{}"!=JSON.stringify(a.planCellInfo)?s("div",[a.describe&&"MG500"!=a.planCellInfo.key?s("span",[e._v(e._s(a.describe))]):e._e(),s("br"),a.planCellInfo.max_high?s("span",[e._v("高速流量:"+e._s(a.planCellInfo.max_high)+",已使用"+e._s(a.planCellInfo.used_high))]):e._e(),s("br"),a.planCellInfo.max_normal?s("span",[e._v("中速流量:"+e._s(a.planCellInfo.max_normal))]):e._e()]):s("div",[a.describe&&"None"!=a.describe?s("p",[s("span",[e._v(e._s(a.describe))]),s("br"),s("span",[e._v(e._s(a.remark))])]):s("p",[s("span",[e._v(e._s(a.remark))])])])])]),s("div",{staticClass:"plan-date-wrap"},[e.inArray(e.usageInfo.source,e.watch_source)>=0||e.inArray(e.usageInfo.source,[1,7,8])>=0?s("p",{staticClass:"plan-date"},[s("span",[e._v("开始日期:"+e._s(e.filterDate(a.activated_at)))]),s("br"),s("span",[e._v("有效日期:"+e._s(e.filterDate(a.expired_at)))])]):a.expired_at?s("p",{staticClass:"plan-date"},[s("span",[e._v("有效日期:"+e._s(e.filterDate(a.expired_at)))])]):e._e(),a.planCellInfo&&"{}"!=JSON.stringify(a.planCellInfo)?s("div",{staticClass:"speedup-wrap"},["MG500"!=a.planCellInfo.key?s("span",[1==a.planCellInfo.plan_cell_status?s("a",{attrs:{href:"/weixin/speedup/plan_80"}},[e._v("购买加速包")]):e._e()]):s("span",[1==a.planCellInfo.plan_cell_status?s("a",{attrs:{href:"/weixin/speedup/plan_500"}}):e._e()])]):e._e(),e.usagePlanLength>1?s("div",{staticClass:"prefer_use"},[1e3==a.priority?s("a",{on:{click:function(t){e.prefer_use_operate(e.usageInfo.iccid,a.id,a.priority,e.usageInfo.source)}}},[e._v("优先使用")]):e._e(),0==a.priority?s("a",{on:{click:function(t){e.prefer_use_operate(e.usageInfo.iccid,a.id,a.priority,e.usageInfo.source)}}},[e._v("取消优先")]):e._e()]):e._e()])])})):s("div",{staticClass:"no-plan"},[s("img",{attrs:{src:t("b066"),alt:""}})])]),s("swiper-slide",[e.hasOrderPlan?s("ul",{staticClass:"order-plan-wrap"},e._l(e.usageInfo.orders,function(a,t){return s("li",[s("div",{staticClass:"plan-info-wrap"},[s("p",{staticClass:"plan-name"},[e._v(e._s(a.name))]),s("div",{staticClass:"plan-split"}),2522==a.rating_id?s("p",{staticClass:"plan-describe"},[s("span",[e._v("月底清零,30天有效,全国通用,有效期或流量任一用完即停机，套餐包含：20G高速流量，480G中速流量，中速流量可使用加速包提升为高速流量。")])]):s("p",{staticClass:"plan-describe"},[s("span",[e._v(e._s(a.describe))]),s("span",[e._v(e._s(a.remark))])]),s("p",{staticClass:"plan-orderNo"},[e._v("订单号:"+e._s(a.no))])]),s("div",{staticClass:"plan-date-wrap"},[s("p",{staticClass:"plan-date"},[s("span",[e._v("续费日期:"+e._s(e.filterDate(a.created_at)))])]),s("p",{staticClass:"plan-order-status-wrap"},[s("span",[e._v(e._s(e.order_state[a.status]))])])])])})):s("div",{staticClass:"no-plan"},[s("img",{attrs:{src:t("96ab"),alt:""}})])])],1)],1)]),s("div",{ref:"refCardButton",staticClass:"btn-recharge-wrap"},[s("button",{on:{click:e.recharge}},[e._v("充值续费")]),s("router-link",{attrs:{to:"/weixin/coupon/index"}},[e._v("卡券兑换")])],1)]),s("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:e.load_plan,callback:function(a){e.load_plan=a},expression:"load_plan"}},[s("p",{staticClass:"showTip"},[e._v(e._s(e.load_plan_msg))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:""==e.load_plan_msg,expression:"load_plan_msg==''"}],staticClass:"fixed-wrap-loading"},[e._m(0)])],1)},r=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"loading-common-center"}},[t("div",{attrs:{id:"loading-common-center-inner"}},[t("div",{staticClass:"loading-object",attrs:{id:"first_object"}}),t("div",{staticClass:"loading-object",attrs:{id:"second_object"}}),t("div",{staticClass:"loading-object",attrs:{id:"third_object"}})])])}],n=(t("28a5"),t("6b54"),t("a322")),o=(t("8a58"),t("e41f")),l=(t("7f7f"),t("9a83"),t("f564")),c=t("7212"),f=t("35df"),d=t("db04"),_={name:"home",data:function(){var e=this;return{client_type:Object(f["c"])(),iccid:"",load_plan:!1,load_plan_msg:"",watch_source:[5,10,12,17,18,20,22],auth_status:["未实名","审核中","审核不通过"],card_state:["未激活","已激活","已停机","已废弃","可测试","可激活"],order_state:["未支付","已支付","已到帐"],plan_title_array:["当前套餐","历史续费套餐"],cur_plan_type_index:0,filterCardInfo:{operator_logo:"",msisdn:"",device_state:"",card_str_state:"",real_name_state:"",refresh_actived:"",is_watch_card:!1,is_flow_card:!1,watch_card_usage:{total_flow:"",used_flow:"",total_voice:"",used_voice:"",detail_right:"",fTotal_flow:"",fUsed_flow:"",fDetail_right:""},flow_card_usage:{total_flow:"",used_flow:"",detail_right:"",fTotal_flow:"",fUsed_flow:"",fDetail_right:""}},hasUsagePlan:!1,usagePlanLength:0,hasOrderPlan:!1,usageInfo:{},swiperOption:{on:{slideChangeTransitionEnd:function(a){e.cur_plan_type_index=this.activeIndex}}},prefer_priority:0}},components:(s={},Object(n["a"])(s,l["a"].name,l["a"]),Object(n["a"])(s,o["a"].name,o["a"]),Object(n["a"])(s,"swiper",c["swiper"]),Object(n["a"])(s,"swiperSlide",c["swiperSlide"]),s),created:function(){Object(f["i"])("type")&&localStorage.setItem("currentType",Object(f["i"])("type")),Object(f["i"])("iccid")?(this.iccid=Object(f["i"])("iccid"),localStorage.setItem("check_iccid",this.iccid),this.getMsg()):Object(f["h"])("check_iccid")?(this.iccid=Object(f["h"])("check_iccid"),this.getMsg()):this.$router.push({path:"/weixin/card/lookup",query:{isEsim:!0}})},mounted:function(){},methods:{getMsg:function(){var e=this;Object(d["a"])("/api/v1/app/cards/telcom/usage",{iccid:this.iccid}).then(function(a){if(1==a.state){e.load_plan_msg=a.msg,e.load_plan=!1,e.usageInfo=a.data,0==e.usageInfo.operator?e.filterCardInfo.operator_logo=t("2c53"):1==e.usageInfo.operator?e.filterCardInfo.operator_logo=t("2e44"):e.filterCardInfo.operator_logo=t("634e"),e.inArray(e.usageInfo.source,e.watch_source)>=0&&19!=e.usageInfo.source&&"86"==e.usageInfo.msisdn.substr(0,2)?e.filterCardInfo.msisdn=e.usageInfo.msisdn.substr(2,e.usageInfo.msisdn.length):e.filterCardInfo.msisdn=e.usageInfo.msisdn,e.inArray(e.usageInfo.source,[1,4])>=0?e.auth_status.push("手淘实名"):e.auth_status.push("已实名"),e.filterCardInfo.real_name_state=e.auth_status[e.usageInfo.auth_status],e.inArray(e.usageInfo.source,[0,2]),e.inArray(e.usageInfo.source,[1,5])>=0&&e.usageInfo.imei&&(e.usageInfo.usage.imei&&e.usageInfo.fenli?2==e.usageInfo.status?e.filterCardInfo.device_state={state:"机卡已分离停机",code:2}:e.filterCardInfo.device_state={state:"机卡分离",code:2}:e.filterCardInfo.device_state={state:"机卡已绑定",code:1}),e.filterCardInfo.card_str_state=e.card_state[e.usageInfo.status],2==e.usageInfo.status?e.filterCardInfo.refresh_actived="激活":e.filterCardInfo.refresh_actived="刷新",e.inArray(e.usageInfo.source,e.watch_source)>=0?(e.filterCardInfo.is_watch_card=!0,e.filterCardInfo.is_flow_card=!1,1==e.usageInfo.usage.noMax?(e.filterCardInfo.watch_card_usage.total_flow="无限",e.filterCardInfo.watch_card_usage.detail_right="无限"):(e.filterCardInfo.watch_card_usage.total_flow=e.flowUnit(e.usageInfo.usage.total,0,1),e.filterCardInfo.watch_card_usage.fTotal_flow=e.flowUnit(e.usageInfo.usage.foreignTotal,0,1),e.filterCardInfo.watch_card_usage.detail_right=e.flowUnit(0,{watchCard:!0,total:e.usageInfo.usage.total,used:e.usageInfo.usage.used},0),e.filterCardInfo.watch_card_usage.fDetail_right=e.flowUnit(0,{watchCard:!0,total:e.usageInfo.usage.foreignTotal,used:e.usageInfo.usage.foreignUsed},0)),e.filterCardInfo.watch_card_usage.used_flow=e.flowUnit(e.usageInfo.usage.used,0,0),e.filterCardInfo.watch_card_usage.fUsed_flow=e.flowUnit(e.usageInfo.usage.foreignUsed,0,0),1==e.usageInfo.usage.noMaxVoice?e.filterCardInfo.watch_card_usage.total_voice="无限":e.filterCardInfo.watch_card_usage.total_voice=Object(f["m"])(e.usageInfo.usage.totalVoice)+"分钟",e.filterCardInfo.watch_card_usage.used_voice=Object(f["m"])(e.usageInfo.usage.usedVoice)+"分钟"):(e.filterCardInfo.is_watch_card=!1,e.filterCardInfo.is_flow_card=!0,6!=e.usageInfo.source&&1!=e.usageInfo.usage.noMax||(e.filterCardInfo.flow_card_usage.total_flow="无限",e.filterCardInfo.flow_card_usage.detail_right="无限"),6!=e.usageInfo.source&&1!=e.usageInfo.usage.noMax&&(e.filterCardInfo.flow_card_usage.total_flow=e.flowUnit(e.usageInfo.usage.total,0,1),e.filterCardInfo.flow_card_usage.fTotal_flow=e.flowUnit(e.usageInfo.usage.foreignTotal,0,1),e.filterCardInfo.flow_card_usage.detail_right=e.flowUnit(0,{flowCard:!0,total:e.usageInfo.usage.total,used:e.usageInfo.usage.used},0),e.filterCardInfo.flow_card_usage.fDetail_right=e.flowUnit(0,{flowCard:!0,total:e.usageInfo.usage.foreignTotal,used:e.usageInfo.usage.foreignUsed},0)),e.filterCardInfo.flow_card_usage.used_flow=e.flowUnit(e.usageInfo.usage.used,0,0),e.filterCardInfo.flow_card_usage.fUsed_flow=e.flowUnit(e.usageInfo.usage.foreignUsed,0,0)),e.hasUsagePlan=!!e.usageInfo.usage.plans.length,e.usagePlanLength=e.usageInfo.usage.plans.length,e.hasOrderPlan=!!e.usageInfo.orders.length;var s=e;e.$nextTick(function(){var e=document.documentElement.clientHeight||document.body.clientHeight,a=s.$refs.refCardInfo.offsetHeight,t=s.$refs.refCardData.offsetHeight,i=s.$refs.refCardButton.offsetHeight,r=s.$refs.refPlanTitle.offsetHeight;"wechat"==s.client_type||"alipay"==s.client_type?s.$refs.mySwiper.$el.style.height=e-a-t-i-r-44+"px":s.$refs.mySwiper.$el.style.height=e-a-t-i-r+"px"})}else e.load_plan=!0,e.load_plan_msg=a.msg})},planTypeClikc:function(e){this.cur_plan_type_index=e,this.$refs.mySwiper.swiper.slideTo(e)},recharge:function(){Object(f["l"])("check_iccid",this.iccid),this.$router.push({path:"/weixin/card/esim_plan_list"})},refreshOrActivated:function(){if("刷新"==this.filterCardInfo.refresh_actived)location.reload();else{if(!this.usageInfo.canActivated)return void Object(l["a"])({message:"无效套餐,无法激活",background:"#ff0752"});if(this.usageInfo.usage.used>=this.usageInfo.usage.total&&this.usageInfo.usage.total>0)return void Object(l["a"])({message:"流量已用完,不能激活,请充值",background:"#ff0752"});Object(d["b"])("/api/v1/app/activated",{iccid:"8934564565432345"}).then(function(e){1==e.state&&Object(l["a"])({message:"请在5分钟内放回原绑定的设备中开机,否则会被停机",background:"#00c2ff"})})}},toConnnection:function(){Object(f["l"])("check_iccid",this.iccid),this.$router.push({path:"/weixin/card/connection"})},inArray:function(e,a,t){return null==a?-1:a.indexOf(e,t)},flowUnit:function(e,a,t){return"[object Object]"==Object.prototype.toString.call(a)&&a.watchCard?a.total==a.used?"0.00MB":Object(f["m"])(a.total-a.used)+"MB":"[object Object]"==Object.prototype.toString.call(a)&&a.flowCard?a.total==a.used?"0.00GB":Object(f["m"])(Object(f["m"])(a.total/1024)-Object(f["m"])(a.used/1e3))+"GB":t?e>=1024?Object(f["m"])(e/1024)+"GB":Object(f["m"])(e)+"MB":e>=1e3?Object(f["m"])(e/1e3)+"GB":Object(f["m"])(e)+"MB"},prefer_use_operate:function(e,a,t,s){1e3==t?this.prefer_priority=0:0==t&&(this.prefer_priority=1e3),Object(d["b"])("/api/v1/app/plans/stick",{iccid:e,rating_id:a,priority:this.prefer_priority,source:s}).then(function(e){1==e.state&&(Object(l["a"])({message:e.msg}),setTimeout(function(){location.reload()},1e3))})},GetUrlRelativePath:function(){var e=document.location.toString(),a=e.split("//"),t=a[1].indexOf("/"),s=a[1].substring(t);return-1!=s.indexOf("?")&&(s=s.split("?")[0]),s}}},u=_,p=(t("55e3"),t("2877")),g=Object(p["a"])(u,i,r,!1,null,null,null);g.options.__file="esim_usage.vue";a["default"]=g.exports},"2c53":function(e,a,t){e.exports=t.p+"img/unicom-logo.82459452.svg"},"2e44":function(e,a,t){e.exports=t.p+"img/mobile-logo.113f99e2.png"},"55e3":function(e,a,t){"use strict";var s=t("92cb"),i=t.n(s);i.a},"634e":function(e,a,t){e.exports=t.p+"img/telecom-logo.5f1f3403.svg"},"8a58":function(e,a,t){"use strict";t("68ef"),t("4d75")},"92cb":function(e,a,t){},"96ab":function(e,a,t){e.exports=t.p+"img/bg_no_recharge.aecc9531.svg"},b066:function(e,a,t){e.exports=t.p+"img/bg_no_plan.275be51a.svg"},e41f:function(e,a,t){"use strict";var s=t("fe7e"),i=t("6605");a["a"]=Object(s["a"])({render:function(){var e,a=this,t=a.$createElement,s=a._self._c||t;return s("transition",{attrs:{name:a.currentTransition}},[a.shouldRender?s("div",{directives:[{name:"show",rawName:"v-show",value:a.value,expression:"value"}],class:a.b((e={},e[a.position]=a.position,e))},[a._t("default")],2):a._e()])},name:"popup",mixins:[i["a"]],props:{position:String,transition:String,overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},computed:{currentTransition:function(){return this.transition||(this.position?"popup-slide-"+this.position:"van-fade")}}})}}]);
//# sourceMappingURL=esim_usage.1f8e5f5e.js.map